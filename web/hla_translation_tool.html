<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title data-i18n="app.title">Half-Life: Alyx Translation Tool</title>
    <!-- Sicherheitsrichtlinie fÃ¼r Electron: verhindert Warnhinweise -->
    <!-- Aktualisierte CSP: Inline-Styles sind Ã¼ber style-src-attr erlaubt -->
    <!-- Medien-Blobs werden Ã¼ber media-src zugelassen -->
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   script-src 'self' https://www.youtube.com 'unsafe-inline';
                   style-src-elem 'self';
                   style-src-attr 'self' 'unsafe-inline';
                   connect-src 'self' https://api.elevenlabs.io https://api.openai.com https://www.youtube.com https://i.ytimg.com;
                   frame-src https://www.youtube.com blob:;
                   img-src 'self' data: https://i.ytimg.com;
                   worker-src 'self' blob:;
                   media-src 'self' blob:;">
    <!-- FÃ¼r oEmbed-Anfragen an YouTube -->
    <link rel="stylesheet" href="src/style.css">
    <script src="src/i18n.js"></script>
</head>
<body>
    <!-- Globaler Ladebalken fÃ¼r Projektwechsel -->
    <div id="projectLoadingOverlay" class="loading-overlay hidden">
        <div class="loading-box">
            <div class="progress-bar"><div class="progress-fill"></div></div>
            <span id="projectLoadingText" data-i18n="loading.project">Projekt wird geladen...</span>
            <ul id="projectLoadingSteps" class="loading-steps"></ul>
        </div>
    </div>
    <div id="errorBanner" class="error-banner hidden">
        <span id="errorBannerMessage"></span>
        <button id="errorBannerRetry" data-i18n="loading.retry">Erneut versuchen</button>
    </div>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2 data-i18n="sidebar.projects">ğŸ® Projekte</h2>
            </div>
            <div class="project-list" id="projectList"></div>
            <button class="add-project-btn" onclick="addProject()" data-i18n="project.add">+ Neues Projekt</button>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="workspace-header">
                <div class="toolbar-tabs" role="tablist" aria-label="Arbeitsbereich">
                    <button id="tab-project" class="toolbar-tab is-active" data-panel="project" role="tab" aria-selected="true" aria-controls="panel-project" data-i18n="tab.project">Projekt</button>
                    <button id="tab-tools" class="toolbar-tab" data-panel="tools" role="tab" aria-selected="false" aria-controls="panel-tools" data-i18n="tab.tools">Werkzeuge</button>
                    <button id="tab-legacy" class="toolbar-tab" data-panel="legacy" role="tab" aria-selected="false" aria-controls="panel-legacy" data-i18n="tab.legacy">Alt</button>
                    <button id="tab-media" class="toolbar-tab" data-panel="media" role="tab" aria-selected="false" aria-controls="panel-media" data-i18n="tab.media">Medien</button>
                    <button id="tab-system" class="toolbar-tab" data-panel="system" role="tab" aria-selected="false" aria-controls="panel-system" data-i18n="tab.system">System</button>
                    <button id="tab-search" class="toolbar-tab" data-panel="search" role="tab" aria-selected="false" aria-controls="panel-search" data-i18n="tab.search">Suche &amp; Verlauf</button>
                </div>
                <div class="toolbar-panels">
                    <section id="panel-project" class="toolbar-panel is-active" data-panel="project" role="tabpanel" aria-labelledby="tab-project" aria-hidden="false">
                        <div class="toolbar-group toolbar-group--project">
                            <div class="group-main">
                                <h3 id="toolbarProjectTitle" class="group-title" data-i18n="toolbar.project.title">Projekt</h3>
                                <div class="group-buttons">
                                    <button class="btn btn-secondary" onclick="showImportDialog()" data-i18n="button.import">ğŸ“¥ Import</button>
                                    <button class="btn btn-secondary" onclick="showCcImportDialog()" data-i18n="button.ccImport">ğŸ¬ Untertitel</button>
                                    <button class="btn btn-secondary" onclick="showFolderBrowser()" data-i18n="button.folder">ğŸ“ Ordner</button>
                                </div>
                            </div>
                            <div class="group-body">
                                <label for="fileInput" class="group-label" data-i18n="label.addFiles">Dateien hinzufÃ¼gen</label>
                                <div class="project-inline">
                                    <textarea class="file-input" placeholder="Dateinamen eingeben (einer pro Zeile)..." data-i18n-placeholder="placeholder.addFiles" id="fileInput" rows="1"></textarea>
                                    <button class="btn btn-primary" onclick="addFiles()" data-i18n="button.addFiles">HinzufÃ¼gen</button>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="panel-tools" class="toolbar-panel" data-panel="tools" role="tabpanel" aria-labelledby="tab-tools" aria-hidden="true">
                        <div class="toolbar-group toolbar-group--tools">
                            <div class="group-main">
                                <h3 id="toolbarToolsTitle" class="group-title" data-i18n="toolbar.tools.title">Werkzeuge</h3>
                                <div class="group-buttons">
                                    <button id="gptScoreButton" class="btn btn-secondary" data-i18n="button.gptScore">Bewerten (GPT)</button>
                                    <button id="wordListButton" class="btn btn-secondary" onclick="openWordList()" data-i18n="button.wordList">ğŸ“š WÃ¶rter</button>
                                    <button id="generateEmotionsButton" class="btn btn-blue" title="Erzeugt deutsche Emotionstags fÃ¼r alle Zeilen" data-i18n="button.generateEmotions" data-i18n-title="tooltip.generateEmotions">Emotionen (DE)</button>
                                    <button class="btn btn-secondary" onclick="openSegmentDialog()" data-i18n="button.assignAudio">ğŸ”Š Audio-Datei zuordnen</button>
                                    <button class="btn btn-secondary" onclick="showZipImportDialog()" data-i18n="button.importZip">ZIP importieren</button>
                                    <button class="btn btn-secondary" id="copyAllEmosButton" data-i18n="button.copyEmotions">Emotionen kopieren</button>
                                    <button class="btn btn-secondary" id="subtitleSearchAllButton" title="Sucht fehlende deutsche Texte im gesamten Projekt" data-i18n="button.subtitleSearchAll" data-i18n-title="tooltip.subtitleSearchAll">UT-Suche alles</button>
                                    <button class="btn btn-secondary" id="devToolsButton" data-i18n="button.devTools">ğŸ DevTools</button>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="panel-legacy" class="toolbar-panel" data-panel="legacy" role="tabpanel" aria-labelledby="tab-legacy" aria-hidden="true">
                        <div class="toolbar-group toolbar-group--legacy">
                            <div class="group-main">
                                <h3 id="toolbarLegacyTitle" class="group-title" data-i18n="toolbar.legacy.title">Alt &amp; Einstellungen</h3>
                                <div class="group-buttons">
                                    <button id="randomProjectButton" class="btn btn-secondary" data-i18n="button.randomProject">ğŸ² Zufall</button>
                                    <button id="sendTextV2Button" class="btn btn-blue" title="Alle Emotional-Texte an ElevenLabs senden" data-i18n="button.sendElevenLabs" data-i18n-title="tooltip.sendElevenLabs">An ElevenLabs schicken</button>
                                    <button class="btn btn-secondary" id="copyAssistantButton" data-i18n="button.copyAssistant">Kopierhilfe</button>
                                    <button class="btn btn-secondary" id="copyAssistant2Button" data-i18n="button.copyAssistant2">Kopierhilfe 2</button>
                                    <button class="btn btn-secondary" id="openDubbingLog" onclick="openDubbingLog()" data-i18n="button.dubbingLog">ğŸ“ Protokoll</button>
                                    <button class="btn btn-secondary" id="debugReportButton" data-i18n="button.debugReport">ğŸ“‹ Debug-Bericht</button>
                                    <div class="menu-wrapper settings-container">
                                        <button id="settingsButton" class="btn btn-secondary menu-toggle" onclick="toggleSettingsMenu()" aria-haspopup="true" aria-expanded="false" data-i18n="settings.title">âš™ï¸ Einstellungen</button>
                                        <div class="settings-menu workspace-dropdown" id="settingsMenu" role="menu">
                                            <div class="settings-item" onclick="cleanupDuplicates()" data-i18n="settings.cleanupDuplicates">ğŸ§¹ Duplikate bereinigen</div>
                                            <div class="settings-item" onclick="scanAudioDuplicates()" data-i18n="settings.audioDuplicates">ğŸµ Audio-Duplikate</div>
                                            <div class="settings-item" onclick="showBackupDialog()" data-i18n="settings.backup">ğŸ’¾ Backup</div>
                                            <div class="settings-item" onclick="showApiDialog()" data-i18n="settings.elevenLabs">ğŸ”Š ElevenLabs API</div>
                                            <div class="settings-item" onclick="showGptApiDialog()" data-i18n="settings.gpt">ğŸ’¬ ChatGPT API</div>
                                            <div class="settings-item" onclick="resetFileDatabase()" data-i18n="settings.resetDb">ğŸ”„ Reset DB</div>
                                            <div class="settings-item" onclick="updateAllFilePaths()" data-i18n="settings.cleanupProjects">ğŸ”„ Projekte bereinigen</div>
                                            <div class="settings-item" onclick="repairProjectFolders()" data-i18n="settings.repairFolders">ğŸ”§ Ordner reparieren</div>
                                            <div class="settings-item language-item">
                                                <label for="languageSelect" class="language-label" data-i18n="settings.language">ğŸŒ Sprache</label>
                                                <select id="languageSelect">
                                                    <option value="de" data-i18n="language.de">Deutsch</option>
                                                    <option value="en" data-i18n="language.en">English</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="panel-media" class="toolbar-panel" data-panel="media" role="tabpanel" aria-labelledby="tab-media" aria-hidden="true">
                        <div class="toolbar-group toolbar-group--media">
                            <div class="group-main">
                                <h3 id="toolbarMediaTitle" class="group-title" data-i18n="toolbar.media.title">Medien</h3>
                                <div class="group-buttons">
                                    <button id="openVideoManager" class="btn btn-secondary" data-i18n="toolbar.media.videos">ğŸ¬ Videos</button>
                                </div>
                            </div>
                            <div class="group-body">
                                <div class="hla-launch">
                                    <select id="modusSelect">
                                        <option value="normal" data-i18n="label.mode">Spiel</option>
                                        <option value="workshop" data-i18n="label.workshop">Workshop</option>
                                    </select>
                                    <select id="spracheSelect">
                                        <option value="english" data-i18n="option.language.english">english</option>
                                        <option value="german" data-i18n="option.language.german">german</option>
                                    </select>
                                    <label class="hla-launch__option">
                                        <input type="checkbox" id="mapCheckbox"> <span data-i18n="label.mapToggle">+map</span>
                                    </label>
                                    <input type="text" id="mapSelect" placeholder="Level" data-i18n-placeholder="placeholder.level">
                                    <div class="start-dropdown">
                                        <button id="startButton" class="btn btn-secondary" onclick="startHla()" title="" data-i18n="button.start">Starten</button>
                                        <button id="startDropdown" class="btn btn-secondary" onclick="toggleStartMenu()">â–¼</button>
                                        <div id="startMenu" class="dropdown-menu">
                                            <label class="dropdown-item"><input type="checkbox" id="optGod"> <span data-i18n="option.godmode">Godmode</span></label>
                                            <label class="dropdown-item"><input type="checkbox" id="optAmmo"> <span data-i18n="option.ammo">Unendliche Munition</span></label>
                                            <label class="dropdown-item"><input type="checkbox" id="optConsole"> <span data-i18n="option.console">Entwicklerkonsole</span></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="panel-system" class="toolbar-panel" data-panel="system" role="tabpanel" aria-labelledby="tab-system" aria-hidden="true">
                        <div class="toolbar-group toolbar-group--system">
                            <div class="group-main">
                                <h3 id="toolbarSystemTitle" class="group-title" data-i18n="toolbar.system.title">System</h3>
                                <div class="group-buttons">
                                    <button id="startTranslateButton" class="btn btn-blue" data-i18n="system.autoTranslate">Automatische Ãœbersetzung</button>
                                    <div class="menu-wrapper">
                                        <button id="systemMenuToggle" class="btn btn-secondary menu-toggle" data-menu-toggle="systemMenu" aria-haspopup="true" aria-expanded="false" data-i18n="system.menu">Verwaltung</button>
                                        <div class="workspace-dropdown workspace-dropdown--wide" id="systemMenu" role="menu">
                                            <div class="dropdown-section">
                                                <h4 class="dropdown-title" data-i18n="system.migration.title">Migration</h4>
                                                <button class="dropdown-item" onclick="startMigration()" data-i18n="system.migration.start">Migration starten</button>
                                                <button class="dropdown-item" onclick="loadMigration()" data-i18n="system.migration.load">Migration laden</button>
                                                <button class="dropdown-item" onclick="migrateData()" data-i18n="system.migration.process">Daten migrieren</button>
                                                <div id="migration-status" class="migration-status"></div>
                                            </div>
                                            <div class="dropdown-section">
                                                <h4 class="dropdown-title" data-i18n="system.storage.title">Speicher</h4>
                                                <div class="storage-compact">
                                                    <div class="storage-status">
                                                        <span id="storageModeIndicator"></span>
                                                        <button id="switchStorageButton" class="btn btn-secondary btn-tight" data-i18n="system.storage.switch">Wechseln</button>
                                                    </div>
                                                    <div id="storageMonitor" class="storage-monitor">
                                                        <div class="progress-bar"><div class="progress-fill" id="storageUsageFill"></div></div>
                                                        <div class="storage-info">
                                                            <span id="storageUsageLabel"></span>
                                                            <span id="lastCleanupLabel"></span>
                                                        </div>
                                                    </div>
                                                    <div class="storage-actions">
                                                        <button id="openStorageFolderButton" class="btn btn-secondary btn-tight" onclick="openStorageFolder()" data-i18n="system.storage.folder">ğŸ“‚ Speicherordner</button>
                                                        <button id="cleanupButton" class="btn btn-secondary btn-tight" data-i18n="system.storage.cleanup">AufrÃ¤umen</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="panel-search" class="toolbar-panel" data-panel="search" role="tabpanel" aria-labelledby="tab-search" aria-hidden="true">
                        <div class="toolbar-group toolbar-group--search">
                            <div class="group-main">
                                <h3 id="toolbarSearchTitle" class="group-title" data-i18n="toolbar.search.title">Suche &amp; Verlauf</h3>
                                <button id="subtitleSearchAllButtonInline" class="btn btn-secondary" title="Sucht fehlende deutsche Texte im gesamten Projekt" data-i18n="button.subtitleSearchAll" data-i18n-title="tooltip.subtitleSearchAll">UT-Suche alles</button>
                            </div>
                            <div class="group-body">
                                <div class="search-bar">
                                    <input type="text" class="search-input" placeholder="Live-Suche: Dateiname oder Text... (GroÃŸ-/Kleinschreibung, Punkte ignoriert)" id="searchInput" data-i18n-placeholder="search.placeholder">
                                    <div class="search-results" id="searchResults"></div>
                                </div>
                                <div class="search-options copy-options">
                                    <label class="copy-option"><input type="checkbox" id="restTranslationCheckbox"> <span data-i18n="search.copy.remainder">Reste-Modus</span></label>
                                    <label class="copy-option"><input type="checkbox" id="copyIncludeTime" checked> <span data-i18n="search.copy.time">Zeit voranstellen</span></label>
                                    <label class="copy-option"><input type="checkbox" id="copyAddDashes"> <span data-i18n="search.copy.dashes">--- anhÃ¤ngen</span></label>
                                    <label class="copy-option"><input type="checkbox" id="copyAddExtremeSpeed"> <span data-i18n="search.copy.speed">â€extrem schnell redenâ€œ ergÃ¤nzen</span></label>
                                </div>
                                <div class="search-meta">
                                    <div class="sort-controls">
                                        <span class="sort-label" data-i18n="search.sort">Sortierung:</span>
                                        <button class="sort-btn active" onclick="sortTable('position', event)" data-i18n="search.sort.position">Position</button>
                                        <button class="sort-btn" onclick="sortTable('filename', event)" data-i18n="search.sort.filename">Dateiname</button>
                                        <button class="sort-btn" onclick="sortTable('folder', event)" data-i18n="search.sort.folder">Ordner</button>
                                        <button class="sort-btn" onclick="sortTable('completion', event)" data-i18n="search.sort.completion">Fertig</button>
                                    </div>
                                    <div class="progress-info">
                                        <div class="progress-stat" id="totalProgress" data-i18n="progress.total">0% vollstÃ¤ndig</div>
                                        <div class="progress-stat" id="folderProgress" data-i18n="progress.folders">0 Ordner</div>
                                        <div class="progress-stat" id="globalProjectProgress" data-i18n="progress.global">0% gesamt</div>
                                        <div class="progress-stat clickable" id="emoProgress" title="Leere und fehlerhafte Emo-Texte neu generieren" data-i18n-title="tooltip.emoRegenerate">ğŸŸ£ 0 | 0 | 0</div>
                                    </div>
                                </div>
                                <div class="search-progress">
                                    <div class="progress-bar" id="globalProjectBar">
                                        <div class="progress-fill" id="globalProjectFill"></div>
                                    </div>
                                    <div class="project-playback">
                                        <div class="project-number-nav">
                                            <button id="numberPrevBtn" onclick="goToPreviousNumber()" title="Eine Nummer zurÃ¼ck" data-i18n-title="tooltip.number.prev">â–²</button>
                                            <button id="numberNextBtn" onclick="goToNextNumber()" title="Eine Nummer weiter" data-i18n-title="tooltip.number.next">â–¼</button>
                                        </div>
                                        <button id="openEnglishReviewBtn" class="btn btn-secondary project-review-btn" onclick="openEnglishReview()" title="Ã–ffnet die EN-Review-Ansicht" aria-haspopup="dialog" aria-controls="englishReviewDialog" data-i18n="project.englishReview" data-i18n-title="tooltip.englishReview">ğŸ‡¬ğŸ‡§ Review</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </header>

<!-- =========================== PROJECT META BAR START =========================== -->
<div class="project-meta-bar" id="projectMetaBar" style="display:none;">
    <span class="meta-project" id="metaProjectName"></span>
    <span class="meta-label" data-i18n="meta.level">| Level:</span>
    <span id="metaLevelName"></span>
    <button class="copy-level-btn" onclick="copyLevelName()" data-i18n-title="meta.copyLevel" title="">â§‰</button>
    <span class="meta-label" data-i18n="meta.part">| Teil:</span>
    <span id="metaPartNumber"></span>
</div>
<!-- =========================== PROJECT META BAR END =========================== -->



            <!-- Scan Progress -->
            <div class="scan-progress" id="scanProgress">
                <div class="scan-status" id="scanStatus" data-i18n="scan.status">Scanne Dateien...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Ãœbersetzungsfortschritt -->
            <div class="translate-progress" id="translateProgress">
                <div class="translate-status" id="translateStatus" data-i18n="translate.status">Ãœbersetze...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="translateFill"></div>
                </div>
            </div>

            <!-- Globale Untertitel-Suche -->
            <div class="subtitle-search-progress" id="subtitleSearchProgress">
                <div class="subtitle-search-status" id="subtitleSearchStatus" data-i18n="subtitle.search">Suche Untertitel...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="subtitleSearchFill"></div>
                </div>
            </div>

            <!-- Table -->
            <div class="table-container">
                <div id="emptyState" class="empty-state">
                    <h3 data-i18n="empty.title">Keine Dateien im Projekt</h3>
                    <p data-i18n="empty.hint">FÃ¼ge Dateien Ã¼ber die Suche oder das Eingabefeld hinzu.</p>
                    <p style="font-size: 14px; color: #888; margin-top: 10px;" data-i18n="empty.tips" data-i18n-html="true">
                        ğŸ’¡ Tipps:<br>
                        â€¢ Doppelklick auf Zeilennummern (#) um Position zu Ã¤ndern<br>
                        â€¢ Tab/Shift+Tab fÃ¼r Navigation zwischen Textfeldern<br>
                        â€¢ Rechtsklick fÃ¼r Kontext-MenÃ¼<br>
                        â€¢ Leertaste fÃ¼r Audio-Wiedergabe (wenn Zeile ausgewÃ¤hlt)
                    </p>
                </div>
                <!-- Tabelle mit kompakten Spalten: EN/DE und Aktionen zusammengefÃ¼hrt -->
                <table id="fileTable" style="display: none;">
<thead>
    <tr>
        <th width="30">â†•</th>
        <th width="50" title="Doppelklick auf Nummer um Position zu Ã¤ndern" data-i18n-title="table.tooltip.position">#</th>
        <th class="sortable" data-i18n="table.header.filename">Dateiname</th>
        <th class="sortable" data-i18n="table.header.folder">Ordner</th>
        <th width="40" title="Speicherort" data-i18n-title="table.tooltip.storage" data-i18n="table.header.storage">Speicher</th>
        <th width="60"><div class="version-score-header" data-i18n="table.header.version" data-i18n-html="true">Version<br>Score</div></th>
        <th data-i18n="table.header.text">EN/DE Text</th>
        <th width="50" data-i18n="table.header.search">UT-Suche</th>
        <th width="90" title="Pfad der EN- und DE-Datei" data-i18n-title="table.tooltip.path" data-i18n="table.header.path">Pfad</th>
        <th width="40" title="LÃ¤ngenvergleich" data-i18n-title="table.tooltip.length" data-i18n="table.header.length">LÃ¤nge</th>
        <th width="130" data-i18n="table.header.actions">Aktionen</th>
    </tr>
</thead>
                    <tbody id="fileTableBody"></tbody>
                </table>
            </div>

            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-message">
                    <div class="save-indicator"></div>
                    <span id="statusText" data-i18n="status.ready">Bereit</span>
                </div>
                <div class="status-info">
                    <span id="fileCount" data-i18n="status.files">0 Dateien</span> |
                    <span id="selectedCount" data-i18n="status.selected">0 ausgewÃ¤hlt</span> |
                    <span id="projectFolderPath" data-i18n="status.folder">sounds</span> |
                    <span id="accessStatus" class="access-status" onclick="handleAccessStatusClick()" title="Klicken um Dateiberechtigungen zu erneuern" data-i18n-title="tooltip.access">
                        <span data-i18n="status.access">ğŸ“‚ Keine Auswahl</span>
                    </span>
                </div>
            </div>
        </main>
    </div>

    <!-- Version Menu -->
    <div class="context-menu" id="versionMenu">
        <div class="context-menu-item" onclick="selectVersion(1)" data-version-number="1"></div>
        <div class="context-menu-item" onclick="selectVersion(2)" data-version-number="2"></div>
        <div class="context-menu-item" onclick="selectVersion(3)" data-version-number="3"></div>
        <div class="context-menu-item" onclick="selectVersion(4)" data-version-number="4"></div>
        <div class="context-menu-item" onclick="selectVersion(5)" data-version-number="5"></div>
        <div class="context-menu-item" onclick="selectVersion(6)" data-version-number="6"></div>
        <div class="context-menu-item" onclick="selectVersion(7)" data-version-number="7"></div>
        <div class="context-menu-item" onclick="selectVersion(8)" data-version-number="8"></div>
        <div class="context-menu-item" onclick="selectVersion(9)" data-version-number="9"></div>
        <div class="context-menu-item" onclick="selectVersion(10)" data-version-number="10"></div>
        <div class="context-menu-item" onclick="selectVersion('custom')" data-i18n="version.menu.custom">Benutzerdefiniert...</div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" id="contextPlay" onclick="contextMenuAction('play')">
            <span>â–¶</span> <span data-i18n="context.play">Audio abspielen</span>
        </div>
        <div class="context-menu-item" id="contextCopyEn" onclick="contextMenuAction('copyEN')">
            <span>ğŸ“„</span> <span data-i18n="context.copyEn">EN Text kopieren</span>
        </div>
        <div class="context-menu-item" id="contextCopyDe" onclick="contextMenuAction('copyDE')">
            <span>ğŸ“„</span> <span data-i18n="context.copyDe">DE Text kopieren</span>
        </div>
        <div class="context-menu-item" id="contextPasteEn" onclick="contextMenuAction('pasteEN')">
            <span>ğŸ“‹</span> <span data-i18n="context.pasteEn">In EN Text einfÃ¼gen</span>
        </div>
        <div class="context-menu-item" id="contextPasteDe" onclick="contextMenuAction('pasteDE')">
            <span>ğŸ“‹</span> <span data-i18n="context.pasteDe">In DE Text einfÃ¼gen</span>
        </div>
        <div class="context-menu-item" id="contextUploadDe" onclick="contextMenuAction('uploadDE')">
            <span>â¬†ï¸</span> <span data-i18n="context.uploadDe">DE-Datei hochladen</span>
        </div>
        <div class="context-menu-item" id="contextHistory" onclick="contextMenuAction('history')">
            <span>ğŸ•’</span> <span data-i18n="context.history">Historie</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" id="contextOpenFolder" onclick="contextMenuAction('openFolder')">
            <span>ğŸ“</span> <span data-i18n="context.openFolder">In Ordner-Browser Ã¶ffnen</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item danger" id="contextDelete" onclick="contextMenuAction('delete')">
            <span>ğŸ—‘ï¸</span> <span data-i18n="context.delete">Datei lÃ¶schen</span>
        </div>
    </div>

    <!-- Auto-Ãœbersetzungs-MenÃ¼ -->
    <div class="context-menu" id="autoTransMenu">
        <div class="context-menu-item" id="autoTransLine" onclick="autoTransMenuAction('line')">
            <span>ğŸ”</span> <span data-i18n="auto.trans.line">Ãœbersetzung fÃ¼r diese Zeile</span>
        </div>
        <div class="context-menu-item" id="autoTransAll" onclick="autoTransMenuAction('all')">
            <span>ğŸ”</span> <span data-i18n="auto.trans.all">Ãœbersetzung fÃ¼r alle Zeilen</span>
        </div>
    </div>

    <!-- Project Context Menu -->
    <div class="context-menu" id="projectContextMenu">
        <div class="context-menu-item" id="projectMenuEdit" onclick="projectMenuAction('edit')">
            <span>âš™ï¸</span> <span data-i18n="project.menu.edit">Projekt bearbeiten</span>
        </div>
        <div class="context-menu-item" id="projectMenuAnalyze" onclick="projectMenuAction('analyze')">
            <span>ğŸ”</span> <span data-i18n="project.menu.analyze">Projekt analysieren</span>
        </div>
        <div class="context-menu-item danger" id="projectMenuDelete" onclick="projectMenuAction('delete')">
            <span>ğŸ—‘ï¸</span> <span data-i18n="project.menu.delete">Projekt lÃ¶schen</span>
        </div>
    </div>

    <!-- Level Context Menu -->
    <div class="context-menu" id="levelContextMenu">
        <div class="context-menu-item" onclick="levelMenuAction('edit')">
            <span>âš™ï¸</span> <span data-i18n="level.menu.edit">Level bearbeiten</span>
        </div>
        <div class="context-menu-item" onclick="levelMenuAction('quickProject')">
            <span>â•</span> <span data-i18n="level.menu.quickProject">Schnellprojekt</span>
        </div>
        <div class="context-menu-item" onclick="levelMenuAction('exportDebug')">
            <span>ğŸ</span> <span data-i18n="level.menu.exportDebug">Debug-Bericht exportieren</span>
        </div>
        <div class="context-menu-item danger" onclick="levelMenuAction('delete')">
            <span>ğŸ—‘ï¸</span> <span data-i18n="level.menu.delete">Level lÃ¶schen</span>
        </div>
    </div>

    <!-- Chapter Context Menu -->
    <div class="context-menu" id="chapterContextMenu">
        <div class="context-menu-item" onclick="chapterMenuAction('edit')">
            <span>âš™ï¸</span> <span data-i18n="chapter.menu.edit">Kapitel bearbeiten</span>
        </div>
        <div class="context-menu-item" onclick="chapterMenuAction('quickLevel')">
            <span>â•</span> <span data-i18n="chapter.menu.quickLevel">Schnell-Level</span>
        </div>
        <div class="context-menu-item danger" onclick="chapterMenuAction('delete')">
            <span>ğŸ—‘ï¸</span> <span data-i18n="chapter.menu.delete">Kapitel lÃ¶schen</span>
        </div>
    </div>

    <!-- Import Dialog -->
    <div class="dialog-overlay hidden" id="importDialog">
        <div class="dialog">
            <h3 id="importDialogTitle">ğŸ“¥ Daten importieren</h3>
            <p class="import-description" id="importDialogDescription" style="margin-bottom: 15px; color: #999;">
                UnterstÃ¼tzte Formate:<br>
                â€¢ Wiki-Tabelle (automatische Spalten-Erkennung)<br>
                â€¢ Pipe-Liste: <code>Dateiname|EN Text|DE Text</code><br>
                â€¢ Der Import erkennt automatisch, welche Spalte die Dateinamen enthÃ¤lt
            </p>
            <div class="import-dialog-layout">
                <div class="import-dialog-panel import-dialog-panel--sidebar">
                    <h4>ğŸ“‚ Soundevents (exports_alyx)</h4>
                    <p class="import-description" style="font-size: 12px; margin-bottom: 10px;">
                        Vorschau aller .wiki-Dateien im Ordner <code>soundevents/exports_alyx</code>. So erkennst du direkt, welche Dateien und Ordner bereitstehen.
                    </p>
                    <div class="soundevent-status" id="soundeventExportsStatus">Nur in der Desktop-Version verfÃ¼gbar.</div>
                    <div class="soundevent-table-wrapper">
                        <table class="soundevent-table">
                            <thead>
                                <tr>
                                    <th>Ordner</th>
                                    <th>Datei</th>
                                    <th>Zeilen</th>
                                    <th>Zuletzt</th>
                                </tr>
                            </thead>
                            <tbody id="soundeventExportsBody"></tbody>
                        </table>
                    </div>
                    <div class="soundevent-actions">
                        <button class="btn btn-secondary" id="soundeventReloadButton" type="button">â†» Neu laden</button>
                        <button class="btn btn-primary" id="soundeventImportButton" type="button" disabled>ğŸ“¥ In Formular Ã¼bernehmen</button>
                        <button class="btn btn-success" id="soundeventImportAllButton" type="button" disabled>ğŸš€ Alle Soundevents importieren</button>
                    </div>
                    <p class="soundevent-bulk-hint">Automatischer Stapelimport: LÃ¤dt jede Datei nacheinander, analysiert sie und startet den Import ohne weitere Klicks.</p>
                    <div class="soundevent-progress" id="soundeventImportProgress" aria-live="polite" aria-hidden="true">
                        <span class="soundevent-progress__spinner" aria-hidden="true"></span>
                        <span class="soundevent-progress__text" id="soundeventImportProgressText">Ãœbernehme Soundeventsâ€¦</span>
                    </div>
                </div>
                <div class="import-dialog-panel import-dialog-panel--main">
                    <div style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                        <button class="btn btn-secondary" id="importFileButton" onclick="triggerImportFile()" data-i18n="import.dialog.fileButton">â€”</button>
                        <span id="importFileName" style="color: #ccc; font-size: 13px;" data-i18n="import.dialog.noFileSelected">â€”</span>
                        <input type="file" id="importFileInput" style="display: none;" accept=".txt,.wiki,.csv,.pipe,.log,.md,.json,*/*" onchange="handleImportFile(event)">
                    </div>
                    <textarea id="importData" placeholder="" data-i18n-placeholder="import.dialog.pastePlaceholder"></textarea>

                    <!-- Column Selection (hidden initially) -->
                    <div id="columnSelection" style="display: none; margin-top: 20px; padding: 15px; background: #1a1a1a; border: 1px solid #444; border-radius: 6px;">
                        <h4 id="columnSelectionTitle" style="color: #ff6b1a; margin-bottom: 15px;" data-i18n="import.dialog.columnTitle">â€”</h4>
                        <p id="columnSelectionDescription" style="margin-bottom: 15px; color: #999; font-size: 13px;" data-i18n="import.dialog.columnDescription">
                            â€”
                        </p>

                        <div style="margin-bottom: 15px;">
                            <label id="filenameColumnLabel" style="display: block; margin-bottom: 5px; color: #ccc;" data-i18n="import.dialog.filenameLabel">â€”</label>
                            <select id="filenameColumn" style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0;" onchange="updatePreviewHighlighting()">
                                <option value="" data-i18n="import.dialog.selectPrompt">â€”</option>
                            </select>
                            <div id="filenameColumnHint" style="font-size: 11px; color: #666; margin-top: 3px;" data-i18n="import.dialog.filenameHint">
                                â€”
                            </div>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <label id="englishColumnLabel" style="display: block; margin-bottom: 5px; color: #ccc;" data-i18n="import.dialog.englishLabel">â€”</label>
                            <select id="englishColumn" style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0;" onchange="updatePreviewHighlighting()">
                                <option value="" data-i18n="import.dialog.selectPrompt">â€”</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <label id="germanColumnLabel" style="display: block; margin-bottom: 5px; color: #ccc;" data-i18n="import.dialog.germanLabel">â€”</label>
                            <select id="germanColumn" style="width: 100%; padding: 8px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0;" onchange="updatePreviewHighlighting()">
                                <option value="" data-i18n="import.dialog.selectNone">â€”</option>
                            </select>
                        </div>

                        <!-- Preview Table -->
                        <div id="previewTable" style="margin-top: 15px;">
                            <h5 id="previewTableTitle" style="color: #ff6b1a; margin-bottom: 10px;" data-i18n="import.dialog.previewTitle">â€”</h5>
                            <div style="overflow-x: auto; max-height: 200px; border: 1px solid #444; border-radius: 4px;">
                                <table id="previewTableContent" style="width: 100%; font-size: 12px;">
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dialog-buttons">
                <button class="btn btn-secondary" id="importCancelButton" onclick="closeImportDialog()" data-i18n="import.dialog.cancelButton">â€”</button>
                <button class="btn" id="analyzeDataBtn" onclick="analyzeImportData()" data-i18n="import.dialog.analyzeButton">â€”</button>
                <button class="btn btn-success" id="startImportBtn" onclick="startImportProcess()" style="display: none;" data-i18n="import.dialog.startButton">â€”</button>
            </div>
        </div>
    </div>

    <!-- Closecaption Import Dialog -->
    <div class="dialog-overlay hidden" id="ccImportDialog">
        <div class="dialog">
            <h3 data-i18n="subtitle.import.title">ğŸ“¥ Untertitel importieren</h3>
            <p>
                <span data-i18n="subtitle.import.sourceLabel">closecaption_english.txt:</span>
                <span id="ccStatusEn"></span>
            </p>
            <div class="cc-language-row">
                <label for="ccLanguageSelect" data-i18n="subtitle.import.languageLabel">Ziel-Sprache (ersetzt Deutsch):</label>
                <select id="ccLanguageSelect"></select>
            </div>
            <p id="ccLanguageStatus">
                <span data-i18n="subtitle.import.targetStatusLabel">Zieldatei:</span>
                <span id="ccStatusTarget"></span>
            </p>
            <div class="subtitle-language-selection">
                <span class="subtitle-language-badge" id="ccLanguageBadge" data-i18n="subtitle.import.badgeDefault">Deutsch</span>
                <small class="subtitle-language-hint" id="ccLanguageHint" data-i18n="subtitle.import.defaultHint">Standard: Deutsch wird importiert.</small>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeCcImportDialog()" data-i18n="subtitle.import.cancel">Abbrechen</button>
                <button class="btn btn-success" onclick="importClosecaptions()" data-i18n="subtitle.import.start">Import starten</button>
            </div>
        </div>
    </div>

    <!-- Folder Browser Dialog -->
    <div class="dialog-overlay folder-browser-dialog hidden" id="folderBrowserDialog">
        <div class="dialog">
<!-- =========================== DIALOG CLOSE BTN START =========================== -->
<button class="dialog-close-btn" onclick="closeFolderBrowser()">Ã—</button>
<!-- =========================== DIALOG CLOSE BTN END =========================== -->
    
            <h3 id="folderBrowserTitle">ğŸ“ Ordner durchsuchen</h3>
            <p style="margin-bottom: 15px; color: #999;" id="folderBrowserDescription">
                Durchsuchen Sie alle verfÃ¼gbaren Ordner aus der Datenbank und fÃ¼gen Sie Dateien zu Ihrem Projekt hinzu.
            </p>
            
<!-- =========================== LEVEL STATS PANEL START =========================== -->
<details class="level-stats" id="levelStatsPanel">
    <summary>ğŸ“Š Ãœbersetzungs-Statistiken pro Level</summary>
    <div id="levelStatsContent" style="margin-top:15px;"></div>
</details>
<!-- =========================== LEVEL STATS PANEL END =========================== -->

            
            <!-- Back button (hidden initially) -->
            <button class="folder-back-btn" id="folderBackBtn" onclick="showFolderGrid()" style="display: none;"></button>
            
            <!-- Folder Grid -->
            <div class="folder-grid" id="folderGrid"></div>
            
            <!-- Folder Files View (hidden initially) -->
            <div class="folder-files-view" id="folderFilesView"></div>
            
            <div class="dialog-buttons">
                <button class="btn btn-secondary" id="folderBrowserReport" onclick="copyFolderReport()">Bericht</button>
                <button class="btn btn-secondary" id="folderBrowserClose" onclick="closeFolderBrowser()">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Backup Dialog -->
    <div class="dialog-overlay hidden" id="backupDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeBackupDialog()">Ã—</button>
            <h3 data-i18n="backup.title">ğŸ’¾ Backups</h3>
            <div id="backupList" style="margin-bottom:15px;"></div>
            <h4 data-i18n="backup.sound.title">Sound-ZIP-Backups</h4>
            <div id="soundBackupList" style="margin-bottom:15px;"></div>
            <div class="translate-progress" id="soundBackupProgress">
                <div class="translate-status" id="soundBackupStatus"></div>
                <div class="progress-bar"><div class="progress-fill" id="soundBackupFill"></div></div>
            </div>
            <div style="margin-bottom:15px;">
                <label>
                    <span data-i18n="backup.interval.label">Intervall (Minuten):</span>
                    <input type="number" id="backupInterval" min="1" style="width:60px;">
                </label>
                <label style="margin-left:10px;">
                    <span data-i18n="backup.limit.label">Anzahl Backups:</span>
                    <input type="number" id="backupLimit" min="1" style="width:60px;">
                </label>
                <label style="margin-left:10px;">
                    <span data-i18n="backup.lineEnding.label">Zeilenende:</span>
                    <select id="lineEndingSelect" style="width:70px;">
                        <option value="LF">LF</option>
                        <option value="CRLF">CRLF</option>
                    </select>
                </label>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="exportTranslationBlueprint()" data-i18n="backup.button.exportStructure">Struktur exportieren</button>
                <button class="btn btn-secondary" onclick="document.getElementById('blueprintImportInput').click()" data-i18n="backup.button.importStructure">Struktur importieren</button>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="createBackup(true)" data-i18n="backup.button.create">Backup erstellen</button>
                <button class="btn btn-secondary" onclick="createSoundBackup()" data-i18n="backup.button.createSound">Sound-Backup erstellen</button>
                <button class="btn btn-secondary" onclick="initiateBackupUpload()" data-i18n="backup.button.upload">Backup hochladen</button>
                <button class="btn btn-secondary" onclick="openBackupFolder()" data-i18n="backup.button.openFolder">Ordner Ã¶ffnen</button>
                <button class="btn btn-secondary" onclick="closeBackupDialog()" data-i18n="backup.button.close">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- ElevenLabs API Dialog -->
    <div class="dialog-overlay hidden" id="apiDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeApiDialog()">Ã—</button>
            <h3 data-i18n="api.dialog.title">ğŸ”Š ElevenLabs API</h3>
            <div class="customize-field api-key-field">
                <label data-i18n="api.key.label">API-Key:</label>
                <input type="password" id="apiKeyInput" style="width:55%;" oninput="validateApiKey()">
                <button class="btn eye-btn" onclick="toggleApiKey()">ğŸ‘</button>
                <button class="btn" id="testApiKeyBtn" onclick="testApiKey()" data-i18n="api.button.testKey">API-Key testen</button>
                <span id="apiKeyStatus" class="status-indicator"></span>
            </div>
            <div id="voiceIdList" class="voice-id-list"></div>
            <div id="customVoicesList" class="custom-voices-list"></div>
            <h4 data-i18n="api.defaults.title">Aktuelle Dubbing-Standardwerte</h4>
            <ul id="voiceSettingsDisplay" class="voice-defaults-list"></ul>
            <div class="dialog-buttons">
                <button class="btn" onclick="testVoiceIds()" data-i18n="api.button.testVoices">Voice-IDs testen</button>
                <button class="btn" onclick="clearAllVoiceIds()" data-i18n="api.button.resetVoices">Alle zurÃ¼cksetzen</button>
                <button class="btn" onclick="addCustomVoice()" data-i18n="api.button.addVoice">Neue Stimme</button>
                <button class="btn btn-secondary" onclick="closeApiDialog()" data-i18n="api.button.cancel">Abbrechen</button>
                <button class="btn btn-success" onclick="saveApiSettings()" data-i18n="api.button.save">Speichern</button>
            </div>
        </div>
    </div>

    <!-- ChatGPT API Dialog -->
    <div class="dialog-overlay hidden" id="gptApiDialog">
        <div class="dialog">
            <button class="dialog-close-btn" onclick="closeGptApiDialog()">Ã—</button>
            <h3 data-i18n="gpt.api.dialog.title">ğŸ’¬ ChatGPT API</h3>
            <div class="customize-field api-key-field">
                <label data-i18n="gpt.api.key.label">API-Key:</label>
                <input type="password" id="openaiKeyInput" style="width:55%;">
                <button class="btn eye-btn" onclick="toggleOpenaiKey()">ğŸ‘</button>
                <button class="btn" id="testOpenaiKeyBtn" onclick="testGptApiKey()" data-i18n="gpt.api.button.testKey">Key testen</button>
                <span id="openaiKeyStatus" class="status-indicator"></span>
            </div>
            <div class="customize-field">
                <label data-i18n="gpt.api.model.label">GPT-Modell:</label>
                <select id="gptModelSelect" style="width:55%;" disabled></select>
                <button class="btn" id="refreshModelsBtn" title="VerfÃ¼gbare Modelle vom Server laden" data-i18n-title="gpt.api.tooltip.refresh">â†»</button>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeGptApiDialog()" data-i18n="gpt.api.button.cancel">Abbrechen</button>
                <button class="btn btn-success" onclick="saveGptApiSettings()" data-i18n="gpt.api.button.save">Speichern</button>
            </div>
        </div>
    </div>

    <!-- GPT Start Dialog -->
    <div class="dialog-overlay hidden" id="gptStartDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeGptStartDialog()">Ã—</button>
            <h3 data-i18n="gpt.start.title">Bewerten (GPT)</h3>
            <p id="gptStartInfo"></p>
            <ul id="gptStartSpeakers" class="debug-info-list"></ul>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeGptStartDialog()" data-i18n="gpt.start.button.cancel">Abbrechen</button>
                <button class="btn btn-success" onclick="startGptScoring()" data-i18n="gpt.start.button.start">Start</button>
            </div>
        </div>
    </div>

    <!-- GPT Prompt Dialog -->
    <div class="dialog-overlay hidden" id="gptPromptDialog">
        <div class="dialog gpt-test-dialog">
            <button class="dialog-close-btn" onclick="closeGptPromptDialog()">Ã—</button>
            <h3 data-i18n="gpt.prompt.title">GPT-Test</h3>
            <div id="gptTestTabs" class="gpt-tabs"></div>
            <div class="gpt-language-row">
                <label for="gptPromptLanguageSelect">Prompt-Sprache:</label>
                <select id="gptPromptLanguageSelect" onchange="onGptPromptLanguageChanged(event)"></select>
            </div>
            <div class="prompt-result-container gpt-flex-layout">
                <section class="gpt-column gpt-column--prompt">
                    <header class="gpt-column-header" data-i18n="gpt.prompt.preview.title">Prompt-Vorschau</header>
                    <textarea id="gptPromptArea" readonly></textarea>
                </section>
                <section class="gpt-column gpt-column--progress">
                    <header class="gpt-column-header" data-i18n="gpt.prompt.progress.title">Fortschritt</header>
                    <div class="gpt-step-list">
                        <div class="gpt-step gpt-step--idle" data-step="prepare">
                            <div class="gpt-step-title" data-i18n="gpt.prompt.step.prepare.title">Vorbereitung</div>
                            <div class="gpt-step-state" id="gptStepPrepare" data-i18n="gpt.prompt.step.state.waiting">Wartetâ€¦</div>
                        </div>
                        <div class="gpt-step gpt-step--idle" data-step="send">
                            <div class="gpt-step-title" data-i18n="gpt.prompt.step.send.title">Ãœbertragung</div>
                            <div class="gpt-step-state" id="gptStepSend" data-i18n="gpt.prompt.step.state.waiting">Wartetâ€¦</div>
                        </div>
                        <div class="gpt-step gpt-step--idle" data-step="process">
                            <div class="gpt-step-title" data-i18n="gpt.prompt.step.process.title">Auswertung</div>
                            <div class="gpt-step-state" id="gptStepProcess" data-i18n="gpt.prompt.step.state.waiting">Wartetâ€¦</div>
                        </div>
                        <div class="gpt-step gpt-step--idle" data-step="apply">
                            <div class="gpt-step-title" data-i18n="gpt.prompt.step.apply.title">Ãœbernahme</div>
                            <div class="gpt-step-state" id="gptStepApply" data-i18n="gpt.prompt.step.state.waiting">Wartetâ€¦</div>
                        </div>
                    </div>
                    <div class="gpt-progress-meter">
                        <div class="progress-bar"><div class="progress-fill" id="gptProgressFill"></div></div>
                        <div class="gpt-progress-info" id="gptProgressLabel" data-i18n="gpt.prompt.progress.label">0 / 0 Zeilen</div>
                    </div>
                    <pre id="gptProgressLog" class="gpt-progress-log"></pre>
                </section>
                <section class="gpt-column gpt-column--result">
                    <header class="gpt-column-header" data-i18n="gpt.prompt.result.title">Antwort</header>
                    <textarea id="gptResultArea" readonly></textarea>
                </section>
            </div>
            <div class="gpt-summary-panel">
                <header class="gpt-column-header" data-i18n="gpt.prompt.summary.title">Zusammenfassung</header>
                <div class="summary-table-wrapper">
                    <table id="gptSummaryTable">
                        <thead>
                            <tr>
                                <th data-i18n="gpt.prompt.summary.header.id">ID</th>
                                <th data-i18n="gpt.prompt.summary.header.file">Datei</th>
                                <th data-i18n="gpt.prompt.summary.header.folder">Ordner</th>
                                <th data-i18n="gpt.prompt.summary.header.score">Bewertung</th>
                                <th data-i18n="gpt.prompt.summary.header.suggestion">Vorschlag</th>
                                <th data-i18n="gpt.prompt.summary.header.comment">Kommentar</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeGptPromptDialog()" data-i18n="gpt.prompt.buttons.close">SchlieÃŸen</button>
                <button class="btn btn-success" id="gptPromptSend" onclick="sendGptPrompt()" data-i18n="gpt.prompt.buttons.send">Senden</button>
                <button class="btn btn-blue" id="gptPromptInsert" onclick="insertGptResults()" disabled data-i18n="gpt.prompt.buttons.insert">EinfÃ¼gen</button>
            </div>
        </div>
    </div>

    <!-- Neue Stimme Dialog -->
    <div class="dialog-overlay hidden" id="addVoiceDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeAddVoiceDialog()">Ã—</button>
            <h3>ğŸ†• Neue Stimme</h3>
            <div class="customize-field">
                <label>Voice-ID:</label>
                <input type="text" id="newVoiceId" style="width:70%;">
            </div>
            <div class="customize-field">
                <label>Name:</label>
                <input type="text" id="newVoiceName" style="width:70%;">
                <button class="btn" onclick="fetchNewVoiceName()">Name abrufen</button>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeAddVoiceDialog()">Abbrechen</button>
                <button class="btn btn-success" onclick="confirmAddVoice()">HinzufÃ¼gen</button>
            </div>
        </div>
    </div>

    <!-- History Dialog -->
    <div class="dialog-overlay hidden" id="historyDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeHistoryDialog()">Ã—</button>
            <h3>ğŸ•’ Historie</h3>
            <div id="historyList" style="margin-bottom:15px;"></div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeHistoryDialog()">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- DE Edit Dialog -->
    <div class="dialog-overlay hidden" id="deEditDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeDeEdit()" title="Fenster schlieÃŸen" aria-label="Fenster schlieÃŸen" data-i18n-title="deAudio.dialog.close" data-i18n-aria-label="deAudio.dialog.close">Ã—</button>
            <div class="edit-header">
                <h3 data-i18n="deAudio.dialog.header">âœ‚ï¸ DE-Audio bearbeiten <span id="deEditSaveInfo" class="save-info"></span></h3>
                <!-- ZusÃ¤tzliche Aktionsleiste im Kopfbereich -->
                <div class="edit-header-actions">
                    <button class="btn btn-secondary" onclick="resetDeEdit()" title="Letzte Speicherung wiederherstellen" data-i18n="deAudio.dialog.reset" data-i18n-title="deAudio.dialog.reset">ZurÃ¼cksetzen</button>
                    <button class="btn btn-blue" onclick="applyDeEdit()" title="Bearbeitung speichern und geÃ¶ffnet lassen" data-i18n="deAudio.dialog.save" data-i18n-title="deAudio.dialog.save">Speichern</button>
                    <button class="btn btn-primary" onclick="applyDeEdit(true)" title="Speichern und den Dialog schlieÃŸen" data-i18n="deAudio.dialog.saveClose" data-i18n-title="deAudio.dialog.saveClose">Speichern &amp; schlieÃŸen</button>
                </div>
            </div>
            <div class="audio-info-panel collapsed" id="audioInfoPanel" aria-live="polite"></div>
            <div class="wave-toolbar" id="waveToolbar">
                <div class="wave-slider wave-zoom-slider">
                    <button type="button" class="wave-toolbar-btn" id="waveZoomOutBtn" title="Zoom verkleinern" aria-label="Zoom verkleinern" data-i18n-title="deAudio.controls.zoom.out" data-i18n-aria-label="deAudio.controls.zoom.out">âˆ’</button>
                    <label for="waveZoomRange" data-i18n="deAudio.controls.zoom.label">Zoom</label>
                    <input type="range" id="waveZoomRange" min="0.8" max="2.5" step="0.1">
                    <span id="waveZoomDisplay">100%</span>
                    <button type="button" class="wave-toolbar-btn" id="waveZoomInBtn" title="Zoom vergrÃ¶ÃŸern" aria-label="Zoom vergrÃ¶ÃŸern" data-i18n-title="deAudio.controls.zoom.in" data-i18n-aria-label="deAudio.controls.zoom.in">+</button>
                </div>
                <div class="wave-slider wave-position-slider">
                    <button type="button" class="wave-toolbar-btn" id="waveScrollLeftBtn" title="Nach links springen" aria-label="Nach links springen" data-i18n-title="deAudio.controls.scroll.left" data-i18n-aria-label="deAudio.controls.scroll.left">âŸµ</button>
                    <label for="waveScrollRange" data-i18n="deAudio.controls.scroll.label">Position</label>
                    <input type="range" id="waveScrollRange" min="0" max="100" step="1" value="0">
                    <span id="waveScrollDisplay">0%</span>
                    <button type="button" class="wave-toolbar-btn" id="waveScrollRightBtn" title="Nach rechts springen" aria-label="Nach rechts springen" data-i18n-title="deAudio.controls.scroll.right" data-i18n-aria-label="deAudio.controls.scroll.right">âŸ¶</button>
                </div>
                <div class="wave-slider">
                    <label for="waveHeightRange" data-i18n="deAudio.controls.height.label">HÃ¶he</label>
                    <input type="range" id="waveHeightRange" min="60" max="200" step="10" value="80">
                    <span id="waveHeightDisplay">80px</span>
                </div>
                <label class="wave-sync-label" data-i18n="deAudio.controls.syncScroll"><input type="checkbox" id="waveSyncScroll"> Scroll koppeln</label>
                <div class="wave-toolbar-buttons">
                    <button id="waveFitFullBtn" class="btn btn-secondary" type="button" title="Gesamtes Audio einpassen" data-i18n="deAudio.controls.fitAll" data-i18n-title="deAudio.controls.fitAll">â†” Alles zeigen</button>
                    <button id="waveFocusSelectionBtn" class="btn btn-secondary" type="button" title="Auswahl in den Fokus holen" data-i18n="deAudio.controls.focusSelection" data-i18n-title="deAudio.controls.focusSelection">ğŸ¯ Auswahl</button>
                </div>
            </div>
            <div class="wave-timeline-preview" id="waveTimelinePreview" aria-hidden="true"></div>
            <div class="wave-area">
                <div class="wave-block wave-block-original">
                    <span class="wave-label" id="waveLabelOriginal" data-i18n="deEdit.waveLabel.original">EN (Original)</span>
                    <div class="wave-controls">
                        <div class="wave-viewport" id="waveOriginalViewport">
                            <div class="wave-scroll" id="waveOriginalScroll">
                                <canvas id="waveOriginal" width="500" height="80" class="wave-canvas"></canvas>
                                <div class="wave-ruler" id="waveOriginalRuler"></div>
                            </div>
                        </div>
                        <div class="wave-buttons">
                            <button id="playOrigPreview" class="de-play-btn" onclick="playOriginalPreview()" title="Original abspielen" aria-label="Original abspielen" data-i18n-title="deAudio.play.original" data-i18n-aria-label="deAudio.play.original">â–¶</button>
                            <button id="stopOrigPreview" class="de-stop-btn" onclick="stopEditPlayback()" title="Wiedergabe stoppen" aria-label="Wiedergabe stoppen" data-i18n-title="deAudio.play.stop" data-i18n-aria-label="deAudio.play.stop">â¹</button>
                        </div>
                    </div>
                    <!-- EN-Text unter der Original-Welle -->
                    <div id="editEnText" class="wave-text"></div>
                </div>
                <!-- Steuerung zum Runterkopieren des markierten EN-Bereichs -->
                <div class="insert-en-section">
                    <div class="insert-controls">
                        <label for="enSegStart">
                            <span class="insert-label" id="enSegStartLabel" data-i18n="deAudio.insert.start">Start EN (ms):</span>
                            <input type="number" id="enSegStart" value="0" step="100">
                        </label>
                        <label for="enSegEnd">
                            <span class="insert-label" id="enSegEndLabel" data-i18n="deAudio.insert.end">Ende EN (ms):</span>
                            <input type="number" id="enSegEnd" value="0" step="100">
                        </label>
                        <label for="enInsertPos">
                            <span class="insert-label" id="enInsertPosLabel" data-i18n="deAudio.insert.position">EinfÃ¼gen bei:</span>
                            <select id="enInsertPos">
                                <option value="cursor" data-i18n="deAudio.insert.pos.cursor">Cursor</option>
                                <option value="start" data-i18n="deAudio.insert.pos.start">Anfang</option>
                                <option value="end" data-i18n="deAudio.insert.pos.end">Ende</option>
                            </select>
                        </label>
                        <button id="copyEnBtn" class="btn btn-secondary" onclick="insertEnglishSegment()" title="Markierten EN-Abschnitt in DE-Audio kopieren" data-i18n="deAudio.insert.copy" data-i18n-title="deAudio.insert.copyTitle">â¬‡ï¸ Kopieren</button>
                    </div>
                </div>
                <div class="wave-block wave-block-edited">
                    <span class="wave-label" id="waveLabelEdited" data-i18n="deEdit.waveLabel.edited">DE (bearbeiten)</span>
                    <div class="wave-controls">
                        <div class="wave-viewport" id="waveEditedViewport">
                            <div class="wave-scroll" id="waveEditedScroll">
                                <canvas id="waveEdited" width="500" height="80" class="wave-canvas"></canvas>
                                <div class="wave-ruler" id="waveEditedRuler"></div>
                            </div>
                        </div>
                        <div class="wave-buttons">
                            <button id="playDePreview" class="de-play-btn" onclick="playDePreview()" title="DE-Vorschau abspielen" aria-label="DE-Vorschau abspielen" data-i18n-title="deAudio.play.preview" data-i18n-aria-label="deAudio.play.preview">â–¶</button>
                            <button id="stopDePreview" class="de-stop-btn" onclick="stopEditPlayback()" title="Wiedergabe stoppen" aria-label="Wiedergabe stoppen" data-i18n-title="deAudio.play.stop" data-i18n-aria-label="deAudio.play.stop">â¹</button>
                        </div>
                    </div>
                    <!-- DE-Text und Emotional-Text unter der Bearbeitungs-Welle -->
                    <div id="editDeText" class="wave-text"></div>
                    <div id="editEmoText" class="wave-text"></div>
                </div>
            </div>
            <div class="edit-layout">
                <!-- Linke Seite: Bereiche & Timing -->
                <section class="timing-section">
                    <div class="quick-actions" aria-label="Schnellzugriff auf hÃ¤ufige Werkzeuge">
                        <div class="quick-header">
                            <h4 class="section-headline" data-i18n="deAudio.quick.header">Schnellzugriff</h4>
                            <p class="quick-subheadline" data-i18n="deAudio.quick.subheadline">Die wichtigsten Schritte stehen als kompakte Buttons bereit und markieren beim Klick die passenden Detailbereiche.</p>
                        </div>
                        <div class="quick-toolbar" role="toolbar" aria-label="Schnellzugriffswerkzeuge">
                            <button id="quickFocusTrim" class="quick-btn" type="button" title="Trimmbereiche bearbeiten" aria-label="Trimmbereiche bearbeiten" data-i18n-title="deAudio.quick.trim" data-i18n-aria-label="deAudio.quick.trim">
                                <span class="quick-icon" aria-hidden="true">âœ‚ï¸</span>
                                <span class="quick-text" data-i18n="deAudio.quick.trim">Trim</span>
                            </button>
                            <button id="quickAutoTrim" class="quick-btn" type="button" title="Stille automatisch erkennen" aria-label="Stille automatisch erkennen" data-i18n-title="deAudio.quick.auto" data-i18n-aria-label="deAudio.quick.auto">
                                <span class="quick-icon" aria-hidden="true">âš¡</span>
                                <span class="quick-text" data-i18n="deAudio.quick.auto">Auto</span>
                            </button>
                            <button id="quickAutoSegment" class="quick-btn quick-btn--segment" type="button" title="Segmente automatisch vorschlagen" aria-label="Segmente automatisch vorschlagen" data-i18n-title="deAudio.quick.segment" data-i18n-aria-label="deAudio.quick.segment">
                                <span class="quick-icon" aria-hidden="true">ğŸ¯</span>
                                <span class="quick-text" data-i18n="deAudio.quick.segment">Segmente</span>
                            </button>
                            <div class="quick-tempo-block">
                                <button id="quickTempoMatch" class="quick-btn" type="button" title="Tempo automatisch auf EN-Zeit anpassen" aria-label="Tempo automatisch auf EN-Zeit anpassen" data-i18n-title="deAudio.quick.tempo" data-i18n-aria-label="deAudio.quick.tempo">
                                    <span class="quick-icon" aria-hidden="true">â±ï¸</span>
                                    <span class="quick-text" data-i18n="deAudio.quick.tempo">Tempo</span>
                                </button>
                                <div class="quick-tempo-inline" role="group" aria-label="Turbo Tempo-Schnellsteuerung">
                                    <div class="quick-tempo-row quick-tempo-steppers">
                                        <button id="quickTempoMinus" class="quick-mini-btn" type="button" title="Tempo schrittweise verringern" aria-label="Tempo schrittweise verringern" data-i18n-title="deAudio.quick.tempoMinus" data-i18n-aria-label="deAudio.quick.tempoMinus">â–</button>
                                        <span id="quickTempoDisplay" class="tempo-value quick-tempo-display" aria-live="polite">1,00</span>
                                        <button id="quickTempoPlus" class="quick-mini-btn" type="button" title="Tempo schrittweise erhÃ¶hen" aria-label="Tempo schrittweise erhÃ¶hen" data-i18n-title="deAudio.quick.tempoPlus" data-i18n-aria-label="deAudio.quick.tempoPlus">â•</button>
                                    </div>
                                    <div class="quick-tempo-row quick-tempo-presets">
                                        <button id="quickTempoSet120" class="quick-mini-btn quick-tempo-preset" type="button" title="Tempo direkt auf 1,20 setzen" aria-label="Tempo direkt auf 1,20 setzen" data-i18n="deAudio.quick.tempo120" data-i18n-title="deAudio.quick.tempo120" data-i18n-aria-label="deAudio.quick.tempo120">1,20Ã—</button>
                                        <button id="quickTempoSet130" class="quick-mini-btn quick-tempo-preset" type="button" title="Tempo direkt auf 1,30 setzen" aria-label="Tempo direkt auf 1,30 setzen" data-i18n="deAudio.quick.tempo130" data-i18n-title="deAudio.quick.tempo130" data-i18n-aria-label="deAudio.quick.tempo130">1,30Ã—</button>
                                    </div>
                                </div>
                            </div>
                            <button id="quickVolumeMatch" class="quick-btn" type="button" title="LautstÃ¤rke an EN anpassen" aria-label="LautstÃ¤rke an EN anpassen" data-i18n-title="deAudio.quick.volume" data-i18n-aria-label="deAudio.quick.volume">
                                <span class="quick-icon" aria-hidden="true">ğŸ”Š</span>
                                <span class="quick-text" data-i18n="deAudio.quick.volume">Pegel</span>
                            </button>
                            <button id="quickRadioEffect" class="quick-btn" type="button" title="FunkgerÃ¤t-Effekt anwenden" aria-label="FunkgerÃ¤t-Effekt anwenden" data-i18n-title="deAudio.quick.radio" data-i18n-aria-label="deAudio.quick.radio">
                                <span class="quick-icon" aria-hidden="true">ğŸ“»</span>
                                <span class="quick-text" data-i18n="deAudio.quick.radio">Funk</span>
                            </button>
                        </div>
                    </div>
                    <div class="timing-grid">
                        <!-- Karte Trimmen -->
                        <div class="timing-card trim-card">
                            <h4 data-i18n="deAudio.timing.trim.title">Trimmen</h4>
                            <div class="trim-fields">
                                <div class="field">
                                    <label for="editStart" data-i18n="deAudio.timing.trim.start">Start (ms)</label>
                                    <div class="input-unit"><input type="number" id="editStart" value="0" step="100"><span class="unit">ms</span></div>
                                </div>
                                <div class="field">
                                    <label for="editEnd" data-i18n="deAudio.timing.trim.end">Ende (ms)</label>
                                    <div class="input-unit"><input type="number" id="editEnd" value="0" step="100"><span class="unit">ms</span></div>
                                </div>
                            </div>
                            <button id="autoTrimBtn" class="copy-btn" title="Stille automatisch erkennen" aria-label="Stille automatisch erkennen" data-i18n="deAudio.timing.trim.auto" data-i18n-title="deAudio.timing.trim.autoTitle" data-i18n-aria-label="deAudio.timing.trim.autoTitle">Auto</button>
                        </div>
                        <!-- Karte Ignorierbereiche -->
                        <div class="timing-card ignore-card">
                            <h4 data-i18n="deAudio.timing.ignore.title">Ignorierbereiche</h4>
                            <div id="ignoreList"></div>
                            <div class="ignore-buttons">
                                <button class="btn btn-secondary" onclick="adjustIgnoreRanges(-50)" title="Ignorierbereich verkÃ¼rzen" aria-label="Ignorierbereich verkÃ¼rzen" data-i18n="deAudio.timing.ignore.shorter" data-i18n-title="deAudio.timing.ignore.shorter" data-i18n-aria-label="deAudio.timing.ignore.shorter">â—€ KÃ¼rzer</button>
                                <button class="btn btn-secondary" onclick="adjustIgnoreRanges(50)" title="Ignorierbereich verlÃ¤ngern" aria-label="Ignorierbereich verlÃ¤ngern" data-i18n="deAudio.timing.ignore.longer" data-i18n-title="deAudio.timing.ignore.longer" data-i18n-aria-label="deAudio.timing.ignore.longer">LÃ¤nger â–¶</button>
                            </div>
                        </div>
                        <!-- Karte Segment-VorschlÃ¤ge -->
                        <div class="timing-card segment-card">
                            <div class="segment-card-header">
                                <h4 data-i18n="deAudio.timing.segment.title">Segment-VorschlÃ¤ge</h4>
                                <button id="segmentRunDetection" class="btn btn-secondary" type="button" title="Neue Segmentierung berechnen" aria-label="Neue Segmentierung berechnen" data-i18n="deAudio.timing.segment.detect" data-i18n-title="deAudio.timing.segment.detect" data-i18n-aria-label="deAudio.timing.segment.detect">Neu erkennen</button>
                            </div>
                            <p class="segment-card-hint" data-i18n="deAudio.timing.segment.hint">Automatische VorschlÃ¤ge kÃ¶nnen als â€behaltenâ€œ oder â€lÃ¶schenâ€œ markiert und direkt in die Ignorierbereiche Ã¼bernommen werden.</p>
                            <div class="segment-controls">
                                <label class="segment-padding-label" for="segmentPaddingInput" data-i18n="deAudio.timing.segment.padding">Sicherheits-Puffer (ms)</label>
                                <input id="segmentPaddingInput" type="number" value="80" step="10" min="0" class="segment-padding-input">
                                <div class="segment-toggle-group">
                                    <button id="segmentKeepAll" class="segment-toggle-all" type="button" data-i18n="deAudio.timing.segment.keepAll">Alle behalten</button>
                                    <button id="segmentDropAll" class="segment-toggle-all segment-toggle-all--danger" type="button" data-i18n="deAudio.timing.segment.dropAll">Alle lÃ¶schen</button>
                                </div>
                            </div>
                            <div id="segmentSuggestionList" class="segment-list" aria-live="polite"></div>
                        </div>
                        <!-- Karte Pausen entfernen -->
                        <div class="timing-card pause-card">
                            <h4 data-i18n="deAudio.timing.pause.title">Pausen entfernen</h4>
                            <label class="checkbox-line" title="LÃ¤ngere Pausen automatisch entfernen" data-i18n="deAudio.timing.pause.auto" data-i18n-title="deAudio.timing.pause.auto"><input type="checkbox" id="autoIgnoreChk"> Pausen &gt; <span class="input-unit"><input type="number" id="autoIgnoreMs" value="400" step="100" style="width:70px;"><span class="unit">ms</span></span> entfernen</label>
                        </div>
                        <!-- Karte Stille-Bereiche -->
                        <div class="timing-card silence-card">
                            <h4 data-i18n="deAudio.timing.silence.title">Stille-Bereiche</h4>
                            <div id="silenceList"></div>
                            <div class="silence-buttons">
                                <button class="btn btn-secondary" onclick="markSilenceRange('start')" title="Startpunkt setzen" aria-label="Startpunkt setzen" data-i18n="deAudio.timing.silence.start" data-i18n-title="deAudio.timing.silence.start" data-i18n-aria-label="deAudio.timing.silence.start">Start</button>
                                <button class="btn btn-secondary" onclick="markSilenceRange('end')" title="Endpunkt setzen" aria-label="Endpunkt setzen" data-i18n="deAudio.timing.silence.end" data-i18n-title="deAudio.timing.silence.end" data-i18n-aria-label="deAudio.timing.silence.end">Ende</button>
                                <button class="btn btn-danger" onclick="clearSilenceTemp()" title="Markierung aufheben" aria-label="Markierung aufheben" data-i18n="deAudio.timing.silence.reset" data-i18n-title="deAudio.timing.silence.reset" data-i18n-aria-label="deAudio.timing.silence.reset">âŸ²</button>
                            </div>
                            <div class="silence-buttons">
                                <button class="btn btn-secondary" onclick="adjustSilenceRanges(-50)" title="Stillebereich verkÃ¼rzen" aria-label="Stillebereich verkÃ¼rzen" data-i18n="deAudio.timing.silence.shorter" data-i18n-title="deAudio.timing.silence.shorter" data-i18n-aria-label="deAudio.timing.silence.shorter">â—€ KÃ¼rzer</button>
                                <button class="btn btn-secondary" onclick="adjustSilenceRanges(50)" title="Stillebereich verlÃ¤ngern" aria-label="Stillebereich verlÃ¤ngern" data-i18n="deAudio.timing.silence.longer" data-i18n-title="deAudio.timing.silence.longer" data-i18n-aria-label="deAudio.timing.silence.longer">LÃ¤nger â–¶</button>
                            </div>
                            <label title="Markierung Ã¼bernehmen" data-i18n="deAudio.timing.silence.applyAfter" data-i18n-title="deAudio.timing.silence.applyAfter">Ãœbernehmen nach: <span class="input-unit"><input type="number" id="silenceApplyDelay" value="0" step="100" style="width:70px;"><span class="unit">ms</span></span></label>
                            <div class="silence-actions">
                                <button class="btn btn-secondary" onclick="applySilenceRange()" title="Bereich Ã¼bernehmen" aria-label="Bereich Ã¼bernehmen" data-i18n="deAudio.timing.silence.apply" data-i18n-title="deAudio.timing.silence.apply" data-i18n-aria-label="deAudio.timing.silence.apply">Ãœbernehmen</button>
                                <button class="btn btn-danger" onclick="deleteSilenceRange()" title="Letzten Bereich lÃ¶schen" aria-label="Letzten Bereich lÃ¶schen" data-i18n="deAudio.timing.silence.delete" data-i18n-title="deAudio.timing.silence.delete" data-i18n-aria-label="deAudio.timing.silence.delete">LÃ¶schen</button>
                            </div>
                        </div>
                        <!-- Karte Bereiche verschmelzen -->
                        <div class="timing-card merge-card">
                            <h4 data-i18n="deAudio.timing.merge.title">Bereiche verschmelzen</h4>
                            <label title="Bereiche verschmelzen, wenn Abstand kleiner ist" data-i18n="deAudio.timing.merge.gap" data-i18n-title="deAudio.timing.merge.gap">Abstand &lt; <span class="input-unit"><input type="number" id="mergeGapMs" value="120" step="10" style="width:70px;"><span class="unit">ms</span></span></label>
                            <label title="Bereiche verschmelzen, wenn Gesamtzeit kleiner ist" data-i18n="deAudio.timing.merge.total" data-i18n-title="deAudio.timing.merge.total">Gesamt &lt; <span class="input-unit"><input type="number" id="mergeTotalMs" value="500" step="10" style="width:70px;"><span class="unit">ms</span></span></label>
                            <label title="Zeitspanne verschmelzen" data-i18n="deAudio.timing.merge.range" data-i18n-title="deAudio.timing.merge.range">Bereiche zusammenlegen: <span class="input-unit"><input type="number" id="mergeRangeMs" value="80" step="10" style="width:70px;"><span class="unit">ms</span></span></label>
                            <button class="btn btn-secondary" onclick="mergeSilenceRanges()" title="Ãœberlappende Bereiche vereinen" aria-label="Ãœberlappende Bereiche vereinen" data-i18n="deAudio.timing.merge.action" data-i18n-title="deAudio.timing.merge.action" data-i18n-aria-label="deAudio.timing.merge.action">Bereiche mergen</button>
                        </div>
                        <!-- Karte Tempo -->
                        <div class="timing-card tempo-card">
                            <h4 data-i18n="deAudio.timing.tempo.title">Tempo</h4>
                            <label class="checkbox-line" title="Passt die Geschwindigkeit des DE-Audios an" data-i18n="deAudio.timing.tempo.auto" data-i18n-title="deAudio.timing.tempo.auto"><input type="checkbox" id="autoTempoChk"> Tempo automatisch an EN anpassen</label>
                            <div class="tempo-row">
                                <span class="tempo-icon">â±ï¸</span>
                                <button id="tempoMinusBtn" class="copy-btn" title="Tempo in kleinen Schritten verringern" aria-label="Tempo in kleinen Schritten verringern" data-i18n-title="deAudio.timing.tempo.decrease" data-i18n-aria-label="deAudio.timing.tempo.decrease">â–</button>
                                <input type="range" id="tempoRange" min="1" max="3" step="0.01" value="1" title="Aktuelles Wiedergabetempo" data-i18n-title="deAudio.timing.tempo.slider">
                                <button id="tempoPlusBtn" class="copy-btn" title="Tempo in kleinen Schritten erhÃ¶hen" aria-label="Tempo in kleinen Schritten erhÃ¶hen" data-i18n-title="deAudio.timing.tempo.increase" data-i18n-aria-label="deAudio.timing.tempo.increase">â•</button>
                                <span id="tempoDisplay" class="tempo-value">1.00</span>
                            </div>
                            <div class="tempo-auto">
                                <button id="tempoAutoBtn" class="copy-btn" title="Tempo auf Minimum setzen" aria-label="Tempo auf Minimum setzen" data-i18n="deAudio.timing.tempo.autoMin" data-i18n-title="deAudio.timing.tempo.autoMin" data-i18n-aria-label="deAudio.timing.tempo.autoMin">Auto</button>
                                <button id="tempoAutoMatchBtn" class="copy-btn" title="Tempo automatisch auf EN-Zeit anpassen" aria-label="Tempo automatisch auf EN-Zeit anpassen" data-i18n="deAudio.timing.tempo.autoMatch" data-i18n-title="deAudio.timing.tempo.autoMatch" data-i18n-aria-label="deAudio.timing.tempo.autoMatch">Auto</button>
                                <span id="tempoInfo"></span><span id="tempoEnInfo"></span>
                            </div>
                        </div>
                        <!-- Button Anpassen & Anwenden -->
                        <button class="btn btn-secondary" id="autoAdjustBtn" title="Pausen kÃ¼rzen und Tempo angleichen" aria-label="Pausen kÃ¼rzen und Tempo angleichen" data-i18n="deAudio.timing.apply" data-i18n-title="deAudio.timing.apply" data-i18n-aria-label="deAudio.timing.apply">ğŸ¯ Anpassen &amp; Anwenden</button>
                    </div>
                </section>
                <!-- Rechte Seite: Effekte & Optionen -->
                <section class="effects-section">
                    <div class="effect-scroll">
                        <fieldset class="effect-group">
                            <legend>ğŸ”Š LautstÃ¤rke angleichen</legend>
                            <button id="volumeMatchBoxBtn" class="effect-btn" onclick="applyVolumeMatch()" title="Pegel an EN anpassen">LautstÃ¤rke angleichen</button>
                            <div class="volume-gain-controls">
                                <p class="volume-gain-note">Booster oder Absenker fÃ¼r schwierige Aufnahmen.</p>
                                <label id="volumeGainToggleLabel" class="effect-toggle" title="Manuellen Booster ein- oder ausschalten"><input type="checkbox" id="volumeGainToggle"> Booster aktivieren</label>
                                <label for="volumeGainRange" title="Manuelle VerstÃ¤rkung in dB">VerstÃ¤rkung: <span id="volumeGainDisplay"></span></label>
                                <input type="range" id="volumeGainRange" min="-12" max="12" step="0.5" value="0" title="Manuellen Pegel anpassen">
                                <div class="volume-gain-presets" id="volumeGainPresets">
                                    <button type="button" class="btn btn-secondary" data-gain="-6">-6 dB</button>
                                    <button type="button" class="btn btn-secondary" data-gain="-3">-3 dB</button>
                                    <button type="button" class="btn btn-secondary" data-gain="3">+3 dB</button>
                                    <button type="button" class="btn btn-secondary" data-gain="6">+6 dB</button>
                                </div>
                                <button type="button" id="volumeGainResetBtn" class="btn-reset-settings" title="Booster auf Neutralwert zurÃ¼cksetzen">Neutral (0 dB)</button>
                            </div>
                        </fieldset>

                        <fieldset class="effect-group">
                            <legend>ğŸ“¡ FunkgerÃ¤t-Effekt</legend>
                            <div class="radio-settings">
                                <label title="MischverhÃ¤ltnis">Wet: <span id="radioStrengthDisplay"></span>
                                    <input type="range" id="radioStrength" min="0" max="1" step="0.05">
                                </label>
                                <label title="Hochpassfrequenz">Highpass (Hz):
                                    <input type="number" id="radioHighpass" min="0" max="1000" step="50">
                                </label>
                                <label title="Tiefpassfrequenz">Lowpass (Hz):
                                    <input type="number" id="radioLowpass" min="1000" max="6000" step="50">
                                </label>
                                <label title="SÃ¤ttigungsgrad">SÃ¤ttigung: <span id="radioSaturationDisplay"></span>
                                    <input type="range" id="radioSaturation" min="0" max="1" step="0.05">
                                </label>
                                <label title="Rauschpegel in dBFS">Rauschen (dB):
                                    <input type="number" id="radioNoise" min="-60" max="0" step="1">
                                </label>
                                <label title="HÃ¤ufigkeit der Knackser">Knackser: <span id="radioCrackleDisplay"></span>
                                    <input type="range" id="radioCrackle" min="0" max="1" step="0.05">
                                </label>
                                <div class="radio-preset">
                                    <select id="radioPresetSelect" title="Gespeicherte Presets"></select>
                                    <button id="saveRadioPresetBtn" type="button" title="Aktuelle Einstellungen speichern">ğŸ’¾ Speichern</button>
                                    <button id="deleteRadioPresetBtn" type="button" title="GewÃ¤hltes Preset lÃ¶schen">ğŸ—‘ LÃ¶schen</button>
                                </div>
                            </div>
                            <div class="effect-actions">
                                <button id="radioEffectBoxBtn" class="effect-btn" onclick="applyRadioEffect()" title="FunkgerÃ¤t-Effekt anwenden">FunkgerÃ¤t-Effekt anwenden</button>
                                <!-- Setzt nur diesen Effekt zurÃ¼ck -->
                                <button class="btn-reset-settings" onclick="resetRadioSettings()" title="Setzt nur diesen Effekt zurÃ¼ck">âŸ³ Standardwerte</button>
                            </div>
                        </fieldset>

                        <fieldset class="effect-group">
                            <legend>ğŸšï¸ Hall-Effekt</legend>
                            <label id="hallToggleLabel" class="effect-toggle" title="Hall-Effekt ein- oder ausschalten"><input type="checkbox" id="hallToggle" onchange="toggleHallEffect(this.checked)"> Aktivieren</label>
                            <div class="hall-settings">
                                <label title="RaumgrÃ¶ÃŸe">Room:
                                    <input type="range" id="hallRoom" min="0" max="1" step="0.05">
                                </label>
                                <label title="MischverhÃ¤ltnis">Wet: <span id="hallAmountDisplay"></span>
                                    <input type="range" id="hallAmount" min="0" max="1" step="0.05">
                                </label>
                                <label title="Vorlaufzeit">Delay (ms):
                                    <input type="number" id="hallDelay" min="0" max="500" step="10">
                                </label>
                            </div>
                            <!-- Setzt nur diesen Effekt zurÃ¼ck -->
                            <button class="btn-reset-settings" onclick="resetHallSettings()" title="Setzt nur diesen Effekt zurÃ¼ck">âŸ³ Standardwerte</button>
                        </fieldset>

                        <fieldset class="effect-group">
                            <legend>ğŸ¦ Zoo-Lautsprecher</legend>
                            <p class="effect-note">Simuliert eine Durchsage Ã¼ber alte Hallen-Lautsprecher in einem Betonbau.</p>
                            <label id="zooSpeakerToggleLabel" class="effect-toggle" title="Zoo-Lautsprecher ein- oder ausschalten"><input type="checkbox" id="zooSpeakerToggle"> Zoo-Lautsprecher aktivieren</label>
                            <p class="effect-note">Bandpass, SÃ¤ttigung und kurzer Betonhall erhalten SprachverstÃ¤ndlichkeit bei deutlichem RaumgefÃ¼hl.</p>
                        </fieldset>

                        <fieldset class="effect-group">
                            <legend>âš¡ EM-StÃ¶rgerÃ¤usch</legend>
                            <label id="emiVoiceDampToggleLabel" class="effect-toggle" title="DÃ¤mpft das Originalsignal bei StÃ¶rungen"><input type="checkbox" id="emiVoiceDampToggle" onchange="toggleEmiVoiceDamp(this.checked)"> SprachdÃ¤mpfung</label>
                            <div class="emi-settings">
                                <!-- Canvas fÃ¼r die HÃ¼llkurve des StÃ¶rgerÃ¤uschs -->
                                <canvas id="emiEnvelopeCanvas" width="200" height="60"></canvas>
                                <label title="StÃ¤rke der StÃ¶rung">StÃ¤rke <span class="info-icon" title="Regelt die LautstÃ¤rke der StÃ¶rung">â„¹ï¸</span>: <span id="emiLevelDisplay"></span>
                                    <input type="range" id="emiLevel" min="0" max="1" step="0.05">
                                </label>
                                <!-- Regler fÃ¼r den Anstiegszeitpunkt -->
                                <label title="Zeitpunkt des starken Anstiegs">Anstieg ab <span class="info-icon" title="Zeitpunkt, ab dem die StÃ¶rung deutlich lauter wird">â„¹ï¸</span>: <span id="emiRampDisplay"></span>
                                    <input type="range" id="emiRamp" min="0" max="1" step="0.05">
                                </label>
                                <label title="HÃ¤ufigkeit der Aussetzer">Aussetzer-HÃ¤ufigkeit <span class="info-icon" title="Wie oft die Verbindung kurz abbricht">â„¹ï¸</span>: <span id="emiDropoutProbDisplay"></span>
                                    <input type="range" id="emiDropoutProb" min="0" max="0.005" step="0.0001">
                                </label>
                                <label title="Dauer eines Aussetzers">Aussetzer-Dauer <span class="info-icon" title="LÃ¤nge eines einzelnen Aussetzers">â„¹ï¸</span>: <span id="emiDropoutDurDisplay"></span>
                                    <input type="range" id="emiDropoutDur" min="0" max="0.1" step="0.005">
                                </label>
                                <label title="HÃ¤ufigkeit der Knackser">Knackser-HÃ¤ufigkeit <span class="info-icon" title="Wahrscheinlichkeit fÃ¼r kurze Knackser">â„¹ï¸</span>: <span id="emiCrackleProbDisplay"></span>
                                    <input type="range" id="emiCrackleProb" min="0" max="0.02" step="0.001">
                                </label>
                                <label title="LautstÃ¤rke der Knackser">Knackser-Amplitude <span class="info-icon" title="LautstÃ¤rke der Knackser">â„¹ï¸</span>: <span id="emiCrackleAmpDisplay"></span>
                                    <input type="range" id="emiCrackleAmp" min="0" max="1" step="0.05">
                                </label>
                                <label title="HÃ¤ufigkeit groÃŸer AusreiÃŸer">Spike-HÃ¤ufigkeit <span class="info-icon" title="Wahrscheinlichkeit fÃ¼r starke AusreiÃŸer">â„¹ï¸</span>: <span id="emiSpikeProbDisplay"></span>
                                    <input type="range" id="emiSpikeProb" min="0" max="0.01" step="0.0005">
                                </label>
                                <label title="LautstÃ¤rke der AusreiÃŸer">Spike-Amplitude <span class="info-icon" title="LautstÃ¤rke der AusreiÃŸer">â„¹ï¸</span>: <span id="emiSpikeAmpDisplay"></span>
                                    <input type="range" id="emiSpikeAmp" min="0" max="1" step="0.05">
                                </label>
                                <label title="Verlauf der StÃ¶rung">Verlauf <span class="info-icon" title="Form der LautstÃ¤rkeentwicklung">â„¹ï¸</span>:
                                    <select id="emiMode">
                                        <option value="constant">Konstant</option>
                                        <option value="up">Anstieg</option>
                                        <option value="updown">Anstieg &amp; Abfall</option>
                                        <option value="down">Abfall</option>
                                    </select>
                                </label>
                            </div>
                            <div class="radio-preset">
                                <select id="emiPresetSelect" title="Gespeicherte Presets"></select>
                                <button id="saveEmiPresetBtn" type="button" title="Aktuelle Einstellungen speichern">ğŸ’¾ Speichern</button>
                                <button id="deleteEmiPresetBtn" type="button" title="GewÃ¤hltes Preset lÃ¶schen">ğŸ—‘ LÃ¶schen</button>
                            </div>
                            <div class="effect-actions">
                                <button id="emiEffectBoxBtn" class="effect-btn" onclick="applyEmiEffect()" title="EM-StÃ¶rgerÃ¤usch anwenden">EM-StÃ¶rgerÃ¤usch anwenden</button>
                                <!-- Setzt nur diesen Effekt zurÃ¼ck -->
                                <button class="btn-reset-settings" onclick="resetEmiSettings()" title="Setzt nur diesen Effekt zurÃ¼ck">âŸ³ Standardwerte</button>
                            </div>
                        </fieldset>

                        <fieldset class="effect-group">
                            <legend>ğŸšª Nebenraum-Effekt</legend>
                            <label id="neighborToggleLabel" class="effect-toggle" title="Nebenraum-Effekt ein- oder ausschalten"><input type="checkbox" id="neighborToggle" onchange="toggleNeighborEffect(this.checked)"> Nebenraum-Effekt</label>
                            <label id="neighborHallToggleLabel" class="effect-toggle" title="Hall-Effekt ein- oder ausschalten"><input type="checkbox" id="neighborHallToggle" onchange="toggleNeighborHall(this.checked)"> Hall-Effekt</label>
                            <label id="tableMicToggleLabel" class="effect-toggle" title="Telefon-auf-Tisch-Effekt ein- oder ausschalten"><input type="checkbox" id="tableMicToggle" onchange="toggleTableMicEffect(this.checked)"> Telefon auf Tisch</label>
                            <label for="tableMicRoom" title="Raumtyp fÃ¼r den Telefon-auf-Tisch-Effekt">Raumtyp:</label>
                            <select id="tableMicRoom">
                                <option value="wohnzimmer">Wohnzimmer</option>
                                <option value="buero">BÃ¼ro</option>
                                <option value="halle">Halle</option>
                                <option value="keller">Keller</option>
                            </select>
                        </fieldset>
                    </div>
                </section>
            </div> <!-- edit-layout Ende -->


            <!-- Schlanke FuÃŸleiste nur mit ZurÃ¼cksetzen/Speichern -->
            <div class="edit-footer">
                <button class="btn btn-secondary" onclick="resetDeEdit()" title="Letzte Speicherung wiederherstellen">ZurÃ¼cksetzen</button>
                <button class="btn btn-blue" onclick="applyDeEdit()" title="Bearbeitung speichern und geÃ¶ffnet lassen">Speichern</button>
                <button class="btn btn-primary" onclick="applyDeEdit(true)" title="Speichern und den Dialog schlieÃŸen">Speichern &amp; schlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Audio-Segmentierung Dialog -->
    <div class="dialog-overlay hidden" id="segmentDialog">
        <div class="dialog">
            <button class="dialog-close-btn" onclick="closeSegmentDialog()">Ã—</button>
            <h3>ğŸµ Audio-Datei zuordnen</h3>
            <!-- Upload-Feld reagiert direkt per onchange, falls der Listener fehlt -->
            <input type="file" id="segmentFileInput" accept=".mp3,.wav" onchange="analyzeSegmentFile(event)">
            <div class="segment-progress" id="segmentProgress">
                <div class="segment-status" id="segmentStatus">Analysiere...</div>
                <div class="progress-bar"><div class="progress-fill" id="segmentFill"></div></div>
            </div>
            <button class="btn btn-secondary" onclick="playSegmentFull()" style="margin-top:6px;">â–¶ Gesamt</button>
            <button class="btn btn-danger" onclick="toggleIgnoreSelectedSegments()" style="margin-top:6px; margin-left:6px;">ğŸš« Ignorieren</button>
            <canvas id="segmentWaveform" width="600" height="80" style="width:100%; background:#111; margin-top:10px;"></canvas>
            <div id="segmentTextList" style="margin-top:10px;"></div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="resetSegmentDialog()">Neu hochladen</button>
                <button class="btn btn-blue" onclick="exportSegmentsToProject()">Importieren</button>
                <button class="btn btn-secondary" onclick="closeSegmentDialog()">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Protokoll Dialog -->
    <div class="dialog-overlay hidden" id="dubbingLogDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeDubbingLog()">Ã—</button>
            <h3>ğŸ“ Dubbing-Protokoll</h3>
            <ul id="protocolList" class="protocol-list"></ul>
            <pre id="dubbingLog" style="max-height:200px; overflow:auto; background:#000; color:#0f0; padding:10px;"></pre>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="copyDubbingLog()">Log kopieren</button>
                <button class="btn btn-danger" onclick="clearDubbingLog()">Log lÃ¶schen</button>
                <button class="btn btn-secondary" onclick="closeDubbingLog()">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Missing Folders Dialog -->
    <div class="dialog-overlay hidden" id="missingFoldersDialog">
        <div class="dialog">
<button class="dialog-close-btn" onclick="closeMissingFoldersDialog()">Ã—</button>
            <h3 id="missingFoldersTitle">ğŸš« Fehlende Ordner</h3>
            <div id="missingFoldersList" style="margin-bottom:15px;"></div>
            <h4 id="databaseFoldersTitle">ğŸ“ Ordner in der Datenbank</h4>
            <div id="databaseFoldersList" style="margin-bottom:15px;"></div>
            <div class="dialog-buttons">
                <button class="btn btn-danger" id="deleteAllMissingBtn">Alle lÃ¶schen</button>
                <button class="btn btn-secondary" id="missingFoldersClose" onclick="closeMissingFoldersDialog()">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Word List Dialog -->
    <div class="dialog-overlay hidden" id="wordListDialog">
        <div class="dialog">
            <button class="dialog-close-btn" onclick="closeWordList()">Ã—</button>
            <h3 data-i18n="wordList.title">ğŸ“š WÃ¶rterbuch</h3>
            <div class="word-list-wrapper">
                <div class="word-list-column">
                    <h4 data-i18n="wordList.section.translations">Ãœbersetzungen</h4>
                    <table id="translationTable" class="word-list-table" style="width:100%; margin-bottom:15px;">
                        <thead>
                            <tr>
                                <th data-i18n="wordList.column.source">Englisch</th>
                                <th data-i18n="wordList.column.translation">Deutsch</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <button class="btn btn-secondary" onclick="addTransRow()" data-i18n="wordList.button.addRow">+ Zeile</button>
                </div>
                <div class="word-list-column">
                    <h4 data-i18n="wordList.section.phonetics">Phonetische Umschrift</h4>
                    <table id="phoneticTable" class="word-list-table" style="width:100%; margin-bottom:15px;">
                        <thead>
                            <tr>
                                <th data-i18n="wordList.column.source">Englisch</th>
                                <th data-i18n="wordList.column.phonetic">Phonetisch</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <button class="btn btn-secondary" onclick="addPhonRow()" data-i18n="wordList.button.addRow">+ Zeile</button>
                </div>
            </div>
            <div class="dialog-buttons">
                <button class="btn btn-secondary" onclick="closeWordList()" data-i18n="wordList.button.cancel">Abbrechen</button>
                <button class="btn btn-success" onclick="saveWordList()" data-i18n="wordList.button.save">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Copy Assistant Dialog -->
    <div class="dialog-overlay hidden" id="copyAssistantDialog">
        <div class="dialog">
            <button class="dialog-close-btn" onclick="closeCopyAssistant()">Ã—</button>
            <h3 data-i18n="copyAssistant.title">ğŸ“‹ Kopierhilfe</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="copyAssistProgress"></div>
            </div>
            <div id="copyAssistInfo">
                <p><strong data-i18n="copyAssistant.field.folder">Ordner:</strong> <span id="copyFolder"></span> <button class="copy-btn" onclick="copyAssistCopy('folder')">â§‰</button></p>
                <p><strong data-i18n="copyAssistant.field.voiceId">ID:</strong> <span id="copyId"></span> <button class="copy-btn" onclick="copyAssistCopy('id')">â§‰</button></p>
                <p><strong data-i18n="copyAssistant.field.voiceName">Name:</strong> <span id="copyName"></span> <button class="copy-btn" onclick="copyAssistCopy('name')">â§‰</button></p>
                <p><strong data-i18n="copyAssistant.field.enText">EN:</strong> <span id="copyEn"></span> <button class="copy-btn" onclick="copyAssistCopy('en')">â§‰</button></p>
                <p><strong data-i18n="copyAssistant.field.deText">DE:</strong> <span id="copyDe"></span> <button class="copy-btn" onclick="copyAssistCopy('de')">â§‰</button></p>
                <p><strong data-i18n="copyAssistant.field.emotion">Emotion:</strong> <span id="copyEmo"></span> <button class="copy-btn" onclick="copyAssistCopy('emo')">â§‰</button></p>
            </div>
            <div id="copyAssistStep" style="margin-top:10px; color:#999;"></div>
            <div class="dialog-buttons">
                <span id="copyAssistCount" style="margin-right:auto"></span>
                <button class="btn btn-secondary" onclick="closeCopyAssistant()" data-i18n="copyAssistant.actions.cancel">Abbrechen</button>
                <button class="btn btn-secondary" onclick="copyAssistPrev()" data-i18n="copyAssistant.actions.prev">ZurÃ¼ck</button>
                <button class="btn btn-success" onclick="copyAssistNext()" data-i18n="copyAssistant.actions.next">Weiter</button>
            </div>
        </div>
    </div>

    <!-- Copy Assistant 2 Dialog -->
    <div class="dialog-overlay hidden" id="copyAssistant2Dialog">
        <div class="dialog">
            <button class="dialog-close-btn" onclick="closeCopyAssistant2()">Ã—</button>
            <h3 data-i18n="copyAssistant2.title">ğŸ“‹ Kopierhilfe 2</h3>
            <div id="copyAssist2Content" style="text-align:center;">
                <div id="copy2Name" style="font-size:24px; font-weight:bold; margin-bottom:10px;"></div>
                <div id="copy2De" style="margin-bottom:10px;"></div>
                <div id="copy2Emo" style="color:#999;"></div>
            </div>
            <div class="dialog-buttons">
                <span id="copyAssist2Page" style="margin-right:auto"></span>
                <button class="btn btn-secondary" onclick="closeCopyAssistant2()" data-i18n="copyAssistant.actions.cancel">Abbrechen</button>
                <button class="btn btn-secondary" onclick="copyAssist2Prev()" data-i18n="copyAssistant.actions.prev">ZurÃ¼ck</button>
                <button class="btn btn-success" onclick="copyAssist2Next()" data-i18n="copyAssistant.actions.next">Weiter</button>
            </div>
        </div>
    </div>

    <!-- EN-Review-Dialog -->
    <div class="dialog-overlay hidden" id="englishReviewDialog" role="dialog" aria-modal="true" aria-labelledby="englishReviewTitle">
        <div class="dialog english-review-dialog">
            <button class="dialog-close-btn" type="button" onclick="closeEnglishReview()" aria-label="Dialog schlieÃŸen" data-i18n-aria-label="englishReview.actions.close">Ã—</button>
            <h3 id="englishReviewTitle" data-i18n="englishReview.dialog.title">ğŸ‡¬ğŸ‡§ EN-Review</h3>
            <div class="english-review-language-toggle" role="radiogroup" aria-label="Audio-Auswahl" data-i18n-aria-label="englishReview.language.groupAria">
                <span class="english-review-language-label" data-i18n="englishReview.language.groupLabel">Audio:</span>
                <label class="english-review-language-option" for="englishReviewLangEn">
                    <input type="radio" name="englishReviewLanguage" id="englishReviewLangEn" value="en" checked>
                    <span data-i18n="englishReview.language.option.en">EN-Audio</span>
                </label>
                <label class="english-review-language-option" for="englishReviewLangDe">
                    <input type="radio" name="englishReviewLanguage" id="englishReviewLangDe" value="de">
                    <span data-i18n="englishReview.language.option.de">DE-Audio</span>
                </label>
            </div>
            <div class="english-review-content">
                <section class="english-review-current" aria-labelledby="englishReviewCurrentLabel">
                    <h4 id="englishReviewCurrentLabel" data-i18n="englishReview.current.heading">Aktuelle Datei</h4>
                    <div class="english-review-current-file" id="englishReviewCurrentFile"></div>
                    <div class="english-review-texts">
                        <article class="english-review-text-block" aria-labelledby="englishReviewEnLabel">
                            <h5 id="englishReviewEnLabel" data-i18n="englishReview.text.enHeading">EN-Text</h5>
                            <p id="englishReviewEnText"></p>
                        </article>
                        <article class="english-review-text-block" aria-labelledby="englishReviewDeLabel">
                            <h5 id="englishReviewDeLabel" data-i18n="englishReview.text.deHeading">DE-Text</h5>
                            <p id="englishReviewDeText"></p>
                        </article>
                    </div>
                </section>
                <div class="english-review-neighbours">
                    <section class="english-review-list" aria-labelledby="englishReviewPreviousLabel">
                        <h4 id="englishReviewPreviousLabel" data-i18n="englishReview.lists.previousHeading">Zuletzt</h4>
                        <ul id="englishReviewPreviousList" class="english-review-items" aria-live="polite"></ul>
                    </section>
                    <section class="english-review-list" aria-labelledby="englishReviewNextLabel">
                        <h4 id="englishReviewNextLabel" data-i18n="englishReview.lists.nextHeading">Als NÃ¤chstes</h4>
                        <ul id="englishReviewNextList" class="english-review-items" aria-live="polite"></ul>
                    </section>
                </div>
            </div>
            <div class="english-review-progress" id="englishReviewProgress" aria-live="polite" data-i18n="englishReview.progress.default">Fortschritt: 0 / 0 (0%)</div>
            <div class="dialog-buttons english-review-controls">
                <button class="btn btn-secondary" id="englishReviewPrevBtn" type="button" onclick="englishReviewPrev()" title="Vorherige Datei" aria-label="Vorherige Datei" data-i18n-title="englishReview.controls.prev" data-i18n-aria-label="englishReview.controls.prev">â®</button>
                <button class="btn btn-secondary" id="englishReviewPlayBtn" type="button" onclick="englishReviewPlay()" title="Wiedergabe starten" aria-label="Wiedergabe starten" data-i18n-title="englishReview.controls.play" data-i18n-aria-label="englishReview.controls.play">â–¶</button>
                <button class="btn btn-secondary" id="englishReviewPauseBtn" type="button" onclick="englishReviewPause()" title="Wiedergabe anhalten" aria-label="Wiedergabe anhalten" data-i18n-title="englishReview.controls.pause" data-i18n-aria-label="englishReview.controls.pause">â¸</button>
                <button class="btn btn-secondary" id="englishReviewNextBtn" type="button" onclick="englishReviewNext()" title="NÃ¤chste Datei" aria-label="NÃ¤chste Datei" data-i18n-title="englishReview.controls.next" data-i18n-aria-label="englishReview.controls.next">â­</button>
                <button class="btn btn-secondary" id="englishReviewScrollBtn" type="button" onclick="englishReviewScrollToCurrent()" title="Aktuelle Zeile anzeigen" aria-label="Zur aktuellen Zeile scrollen" data-i18n-title="englishReview.controls.scroll" data-i18n-aria-label="englishReview.controls.scroll" data-i18n="englishReview.controls.scrollButton">â¬‡ Zeile</button>
                <button class="btn btn-secondary" id="englishReviewCloseBtn" type="button" onclick="closeEnglishReview()" title="Dialog schlieÃŸen" aria-label="Dialog schlieÃŸen" data-i18n="englishReview.actions.closeLabel" data-i18n-title="englishReview.actions.close" data-i18n-aria-label="englishReview.actions.close">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="audioPlayer"></audio>
    <input type="file" id="deUploadInput" style="display:none" accept=".mp3,.wav,.ogg" onchange="handleDeUpload(this)">
    <input type="file" id="zipImportInput" style="display:none" accept=".zip" onchange="handleZipImport(this)">
    <input type="file" id="backupUploadInput" style="display:none" accept=".json" onchange="handleBackupUpload(this)">
    <input type="file" id="blueprintImportInput" style="display:none" accept=".json" onchange="triggerTranslationBlueprintImport(this)">

    <!-- Umschaltbare Debug-Konsole (standardmÃ¤ÃŸig versteckt) -->
    <details id="debugConsoleWrapper" style="margin:10px 0; display:none;">
        <summary>ğŸ› ï¸ Debug-Konsole</summary>
        <button class="btn btn-secondary" onclick="showFolderDebug()">ğŸ Ordner prÃ¼fen</button>
        <div id="folderDebug" style="margin:10px 0;"></div>
        <pre id="debugConsole" style="max-height:200px; overflow:auto; background:#000; color:#0f0; padding:5px;"></pre>
    </details>


    <!-- Toast-Meldungen -->
    <div id="toastContainer"></div>

    <!-- Video-Manager mit integriertem Player -->
    <dialog id="videoMgrDialog" class="video-dialog">
        <div class="video-grid">
            <aside id="videoListSection" class="video-bookmarks">
                <h2 data-i18n="videoManager.title">ğŸ“¼ Gespeicherte Videos</h2>
                <div class="video-toolbar">
                    <div class="video-search">
                        <input id="videoFilter" placeholder="Suche â€¦" data-i18n-placeholder="videoManager.searchPlaceholder" />
                        <button id="closeVideoDlgSmall" class="btn btn-danger close-icon">âŒ</button>
                    </div>
                    <div class="video-url">
                        <input type="text" id="videoUrlInput" placeholder="YouTube-Link mit Startzeit â€¦" data-i18n-placeholder="videoManager.urlPlaceholder">
                        <button id="addVideoBtn" class="btn" data-i18n="videoManager.addButton">+ HinzufÃ¼gen</button>
                    </div>
                </div>
                <div id="videoTableWrapper">
                    <div id="videoGrid" class="video-grid-container"></div>
                </div>
            </aside>
        </div>
        <button id="closeVideoDlg" class="dialog-close-btn">Ã—</button>
    </dialog>

    <!-- Versionsanzeige -->
    <!-- Verlinkung zur aktuellen Version -->
    <a id="versionLink" href="https://github.com/Lumorn/hla_translation_tool" target="_blank">v1.40.127</a>

    <script src="src/colorUtils.js"></script>
    <script src="src/fileStorage.js"></script>
    <script src="src/migrationUI.js"></script>
    <script src="src/projectHelpers.js"></script>
    <script src="src/projectSwitch.js"></script>
    <script src="src/calculateProjectStats.js"></script>
    <script src="src/main.js"></script>
    <script type="module" src="renderer.js"></script>
</body>
</html>

